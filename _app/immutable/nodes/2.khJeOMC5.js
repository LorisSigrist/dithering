var wi=Object.defineProperty;var Ei=(t,e,n)=>e in t?wi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Le=(t,e,n)=>(Ei(t,typeof e!="symbol"?e+"":e,n),n),zt=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var z=(t,e,n)=>(zt(t,e,"read from private field"),n?n.call(t):e.get(t)),fe=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ae=(t,e,n,i)=>(zt(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var pe=(t,e,n)=>(zt(t,e,"access private method"),n);import{s as ae,O as yt,P as Kn,Q as Jn,f as I,i as p,R as Mt,k as O,n as te,S as it,T as gn,U as ki,e as k,b as P,d as y,j as B,V as ve,W as Qn,v as h,w as Se,l as w,X as ee,Y as $n,c as Ct,u as It,g as St,a as Tt,Z as xt,_ as Re,$ as et,a0 as Gt,A as ze,r as yi,x,D as Ot,a1 as Q,p as Lt,a2 as Mi,t as ye,h as Me,a3 as Pe,m as Ye,a4 as fn,F as Ci,a5 as _n,a6 as Ii,a7 as Si}from"../chunks/scheduler.hV77ntI1.js";import{S as oe,i as le,b as H,d as j,m as Y,t as R,a as N,e as q,g as tt,c as nt,f as $}from"../chunks/index.FndWQD37.js";function Ce(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ei(t,e){const n={},i={},s={$$scope:1};let a=t.length;for(;a--;){const r=t[a],l=e[a];if(l){for(const o in r)o in l||(i[o]=1);for(const o in l)s[o]||(n[o]=l[o],s[o]=1);t[a]=l}else for(const o in r)s[o]=1}for(const r in i)r in n||(n[r]=void 0);return n}async function Ti(t,e,n="png"){const i=new OffscreenCanvas(t.width,t.height),s=i.getContext("2d");if(!s)return;s.drawImage(t,0,0,t.width,t.height);const a=await i.convertToBlob({type:"image/"+n,quality:1}),r=URL.createObjectURL(a),l=document.createElement("a");l.download=`${e}.${n}`,l.href=r,l.click(),l.remove(),URL.revokeObjectURL(r)}function ti(t){return new Promise((e,n)=>{t.type.startsWith("image/")||n(new Error("Not an image file"));const i=new FileReader;i.onload=()=>{if(typeof i.result!="string")return;const s=new Image;s.onload=()=>{e(s)},s.onerror=a=>{n(a)},s.src=i.result},i.onerror=s=>{n(s)},i.readAsDataURL(t)})}function me(t){const e=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return[e,n,i]}const pn=""+new URL("../assets/og.uZVEoKcj.webp",import.meta.url).href,Li=""+new URL("../assets/dither-studio-logo.n5INhk8_.png",import.meta.url).href,Ai=""+new URL("../assets/cat._rnomF3a.jpg",import.meta.url).href,Ri=""+new URL("../assets/david.WPnEYXi0.png",import.meta.url).href,Di=""+new URL("../assets/radial.zn-w5FJ2.png",import.meta.url).href,ni={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}]},micro:{a:{viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{d:"M8.75 2.75a.75.75 0 0 0-1.5 0v5.69L5.03 6.22a.75.75 0 0 0-1.06 1.06l3.5 3.5a.75.75 0 0 0 1.06 0l3.5-3.5a.75.75 0 0 0-1.06-1.06L8.75 8.44V2.75Z"},{d:"M3.5 9.75a.75.75 0 0 0-1.5 0v1.5A2.75 2.75 0 0 0 4.75 14h6.5A2.75 2.75 0 0 0 14 11.25v-1.5a.75.75 0 0 0-1.5 0v1.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-1.5Z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{d:"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z"},{d:"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"}]}},Pi={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"}]},micro:{a:{viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M10.47 2.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H5.75a.75.75 0 0 1 0-1.5h5.69l-.97-.97a.75.75 0 0 1 0-1.06Zm-4.94 6a.75.75 0 0 1 0 1.06l-.97.97h5.69a.75.75 0 0 1 0 1.5H4.56l.97.97a.75.75 0 1 1-1.06 1.06l-2.25-2.25a.75.75 0 0 1 0-1.06l2.25-2.25a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M13.2 2.24a.75.75 0 0 0 .04 1.06l2.1 1.95H6.75a.75.75 0 0 0 0 1.5h8.59l-2.1 1.95a.75.75 0 1 0 1.02 1.1l3.5-3.25a.75.75 0 0 0 0-1.1l-3.5-3.25a.75.75 0 0 0-1.06.04Zm-6.4 8a.75.75 0 0 0-1.06-.04l-3.5 3.25a.75.75 0 0 0 0 1.1l3.5 3.25a.75.75 0 1 0 1.02-1.1l-2.1-1.95h8.59a.75.75 0 0 0 0-1.5H4.66l2.1-1.95a.75.75 0 0 0 .04-1.06Z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M15.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l3.22-3.22H7.5a.75.75 0 0 1 0-1.5h11.69l-3.22-3.22a.75.75 0 0 1 0-1.06Zm-7.94 9a.75.75 0 0 1 0 1.06l-3.22 3.22H16.5a.75.75 0 0 1 0 1.5H4.81l3.22 3.22a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"}]}},vt={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}]},micro:{a:{viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"}]}},bt={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}]},micro:{a:{viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M11.78 9.78a.75.75 0 0 1-1.06 0L8 7.06 5.28 9.78a.75.75 0 0 1-1.06-1.06l3.25-3.25a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06Z","clip-rule":"evenodd"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M11.47 7.72a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 0 1-1.06-1.06l7.5-7.5Z","clip-rule":"evenodd"}]}},Bi={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}]},micro:{a:{viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M8 1a3.5 3.5 0 0 0-3.5 3.5V7A1.5 1.5 0 0 0 3 8.5v5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 11.5 7V4.5A3.5 3.5 0 0 0 8 1Zm2 6V4.5a2 2 0 1 0-4 0V7h4Z","clip-rule":"evenodd"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M10 1a4.5 4.5 0 0 0-4.5 4.5V9H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-.5V5.5A4.5 4.5 0 0 0 10 1Zm3 8V5.5a3 3 0 1 0-6 0V9h6Z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z","clip-rule":"evenodd"}]}},ii={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"}]},micro:{a:{viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{d:"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"}]}},ri={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"}]},micro:{a:{viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{d:"M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},path:[{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"}]}};function vn(t,e,n){const i=t.slice();return i[6]=e[n],i}function bn(t){let e,n=[t[6]],i={};for(let s=0;s<n.length;s+=1)i=yt(i,n[s]);return{c(){e=Kn("path"),this.h()},l(s){e=Jn(s,"path",{}),I(e).forEach(p),this.h()},h(){Mt(e,i)},m(s,a){O(s,e,a)},p(s,a){Mt(e,i=ei(n,[a&2&&s[6]]))},d(s){s&&p(e)}}}function Ni(t){var r,l;let e,n=Ce(((r=t[1])==null?void 0:r.path)??[]),i=[];for(let o=0;o<n.length;o+=1)i[o]=bn(vn(t,n,o));let s=[(l=t[1])==null?void 0:l.a,{xmlns:"http://www.w3.org/2000/svg"},{width:t[0]},{height:t[0]},{"aria-hidden":"true"},t[2]],a={};for(let o=0;o<s.length;o+=1)a=yt(a,s[o]);return{c(){e=Kn("svg");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=Jn(o,"svg",{xmlns:!0,width:!0,height:!0,"aria-hidden":!0});var u=I(e);for(let f=0;f<i.length;f+=1)i[f].l(u);u.forEach(p),this.h()},h(){Mt(e,a)},m(o,u){O(o,e,u);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null)},p(o,[u]){var f,d;if(u&2){n=Ce(((f=o[1])==null?void 0:f.path)??[]);let c;for(c=0;c<n.length;c+=1){const g=vn(o,n,c);i[c]?i[c].p(g,u):(i[c]=bn(g),i[c].c(),i[c].m(e,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=n.length}Mt(e,a=ei(s,[u&2&&((d=o[1])==null?void 0:d.a),{xmlns:"http://www.w3.org/2000/svg"},u&1&&{width:o[0]},u&1&&{height:o[0]},{"aria-hidden":"true"},u&4&&o[2]]))},i:te,o:te,d(o){o&&p(e),it(i,o)}}}function Oi(t,e,n){let i;const s=["src","size","solid","mini"];let a=gn(e,s),{src:r}=e,{size:l="100%"}=e,{solid:o=!1}=e,{mini:u=!1}=e;if(l!=="100%"&&l.slice(-1)!="x"&&l.slice(-1)!="m"&&l.slice(-1)!="%")try{l=parseInt(l)+"px"}catch{l="100%"}return t.$$set=f=>{e=yt(yt({},e),ki(f)),n(2,a=gn(e,s)),"src"in f&&n(3,r=f.src),"size"in f&&n(0,l=f.size),"solid"in f&&n(4,o=f.solid),"mini"in f&&n(5,u=f.mini)},t.$$.update=()=>{t.$$.dirty&56&&n(1,i=r==null?void 0:r[o?"solid":u?"mini":"default"])},[l,i,a,r,o,u]}class De extends oe{constructor(e){super(),le(this,e,Oi,Ni,ae,{src:3,size:0,solid:4,mini:5})}}const Ui=""+new URL("../assets/dither-studio-logo.n5INhk8_.png",import.meta.url).href;function wn(t,e,n){const i=t.slice();return i[5]=e[n],i}function En(t){let e,n,i,s,a;function r(){return t[3](t[5])}return{c(){e=k("button"),n=k("img"),this.h()},l(l){e=y(l,"BUTTON",{class:!0});var o=I(e);n=y(o,"IMG",{class:!0,src:!0,alt:!0}),o.forEach(p),this.h()},h(){h(n,"class","aspect-square h-24 w-24 rounded-md border-2 border-white object-cover shadow-md"),Qn(n.src,i=t[5])||h(n,"src",i),h(n,"alt",""),h(e,"class","transition-opacity hover:opacity-75")},m(l,o){O(l,e,o),w(e,n),s||(a=ee(e,"click",r),s=!0)},p(l,o){t=l},d(l){l&&p(e),s=!1,a()}}}function Xi(t){let e,n,i,s,a,r,l="Select or Drop an Image to Start",o,u,f,d,c,g,b,m,E="Choose an Image",_,v,M,A,V,X=Ce(t[0]),U=[];for(let C=0;C<X.length;C+=1)U[C]=En(wn(t,X,C));return g=new De({props:{src:ii,class:"h-12 w-12 text-gray-400"}}),{c(){e=k("img"),i=P(),s=k("div"),a=k("div"),r=k("p"),r.textContent=l,o=P(),u=k("div");for(let C=0;C<U.length;C+=1)U[C].c();f=P(),d=k("label"),c=k("div"),H(g.$$.fragment),b=P(),m=k("span"),m.textContent=E,_=P(),v=k("input"),this.h()},l(C){e=y(C,"IMG",{src:!0,alt:!0,class:!0,style:!0}),i=B(C),s=y(C,"DIV",{class:!0});var S=I(s);a=y(S,"DIV",{class:!0});var L=I(a);r=y(L,"P",{class:!0,"data-svelte-h":!0}),ve(r)!=="svelte-dkjttq"&&(r.textContent=l),o=B(L),u=y(L,"DIV",{class:!0});var G=I(u);for(let de=0;de<U.length;de+=1)U[de].l(G);f=B(G),d=y(G,"LABEL",{for:!0,class:!0});var ne=I(d);c=y(ne,"DIV",{class:!0});var Z=I(c);j(g.$$.fragment,Z),Z.forEach(p),b=B(ne),m=y(ne,"SPAN",{class:!0,"data-svelte-h":!0}),ve(m)!=="svelte-8mr9mk"&&(m.textContent=E),_=B(ne),v=y(ne,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),ne.forEach(p),G.forEach(p),L.forEach(p),S.forEach(p),this.h()},h(){Qn(e.src,n=Ui)||h(e,"src",n),h(e,"alt","Dither Studio"),h(e,"class","fixed left-0 top-0 m-4 h-12 w-12 rounded-full shadow-lg"),Se(e,"image-rendering","pixelated"),h(r,"class","text-center text-2xl text-gray-500"),h(c,"class","grid h-full w-full place-items-center"),h(m,"class","sr-only"),h(v,"type","file"),h(v,"class","sr-only"),h(v,"id","image-input"),h(v,"accept","image/*"),h(d,"for","image-input"),h(d,"class","spect-square block h-24 w-24 rounded-md border-2 border-white bg-white object-cover shadow-md hover:bg-gray-100"),h(u,"class","flex flex-wrap justify-center gap-3"),h(a,"class","grid gap-4"),h(s,"class","grid h-full w-full place-items-center px-8")},m(C,S){O(C,e,S),O(C,i,S),O(C,s,S),w(s,a),w(a,r),w(a,o),w(a,u);for(let L=0;L<U.length;L+=1)U[L]&&U[L].m(u,null);w(u,f),w(u,d),w(d,c),Y(g,c,null),w(d,b),w(d,m),w(d,_),w(d,v),M=!0,A||(V=ee(v,"input",t[1]),A=!0)},p(C,[S]){if(S&5){X=Ce(C[0]);let L;for(L=0;L<X.length;L+=1){const G=wn(C,X,L);U[L]?U[L].p(G,S):(U[L]=En(G),U[L].c(),U[L].m(u,f))}for(;L<U.length;L+=1)U[L].d(1);U.length=X.length}},i(C){M||(R(g.$$.fragment,C),M=!0)},o(C){N(g.$$.fragment,C),M=!1},d(C){C&&(p(e),p(i),p(s)),it(U,C),q(g),A=!1,V()}}}function Vi(t){const e=[Di,Ri,Ai],n=$n();async function i(r){const l=r.target.files[0];if(l)try{n("image",await ti(l))}catch(o){alert("Failed to load image"),console.error(o)}}async function s(r){const l=new Image;l.onload=()=>{n("image",l)},l.src=r}return[e,i,s,r=>s(r)]}class Fi extends oe{constructor(e){super(),le(this,e,Vi,Xi,ae,{})}}function zi(t){let e,n,i,s,a;const r=t[3].default,l=Ct(r,t,t[2],null);return{c(){e=k("button"),l&&l.c(),this.h()},l(o){e=y(o,"BUTTON",{type:!0,class:!0});var u=I(e);l&&l.l(u),u.forEach(p),this.h()},h(){e.disabled=t[0],h(e,"type","button"),h(e,"class",n=t[1][t[0]?"disabled":"normal"]+" flex items-center justify-center gap-2 rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600")},m(o,u){O(o,e,u),l&&l.m(e,null),i=!0,s||(a=ee(e,"click",t[4]),s=!0)},p(o,[u]){l&&l.p&&(!i||u&4)&&It(l,r,o,o[2],i?Tt(r,o[2],u,null):St(o[2]),null),(!i||u&1)&&(e.disabled=o[0]),(!i||u&1&&n!==(n=o[1][o[0]?"disabled":"normal"]+" flex items-center justify-center gap-2 rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"))&&h(e,"class",n)},i(o){i||(R(l,o),i=!0)},o(o){N(l,o),i=!1},d(o){o&&p(e),l&&l.d(o),s=!1,a()}}}function Wi(t,e,n){let{$$slots:i={},$$scope:s}=e,{disabled:a=!1}=e;const r={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function l(o){xt.call(this,t,o)}return t.$$set=o=>{"disabled"in o&&n(0,a=o.disabled),"$$scope"in o&&n(2,s=o.$$scope)},[a,r,s,i,l]}class kn extends oe{constructor(e){super(),le(this,e,Wi,zi,ae,{disabled:0})}}var Hi=class extends EventTarget{dispatchTypedEvent(t,e){return super.dispatchEvent(e)}};class Fe{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:lt(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(n=>new Fe(n));if(e.length>0)return e}return[this]}}const lt=t=>"pointerId"in t,Wt=t=>"changedTouches"in t,yn=()=>{};class ji{constructor(e,{start:n=()=>!0,move:i=yn,end:s=yn,rawUpdates:a=!1,avoidPointerEvents:r=!1}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=l=>{if(lt(l)&&l.buttons===0)this._excludeFromButtonsCheck.add(l.pointerId);else if(!(l.buttons&1))return;const o=new Fe(l);this.currentPointers.some(u=>u.id===o.id)||this._triggerPointerStart(o,l)&&(lt(l)?((l.target&&"setPointerCapture"in l.target?l.target:this._element).setPointerCapture(l.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=l=>{for(const o of Array.from(l.changedTouches))this._triggerPointerStart(new Fe(o),l)},this._move=l=>{if(!Wt(l)&&(!lt(l)||!this._excludeFromButtonsCheck.has(l.pointerId))&&l.buttons===0){this._pointerEnd(l);return}const o=this.currentPointers.slice(),u=Wt(l)?Array.from(l.changedTouches).map(d=>new Fe(d)):[new Fe(l)],f=[];for(const d of u){const c=this.currentPointers.findIndex(g=>g.id===d.id);c!==-1&&(f.push(d),this.currentPointers[c]=d)}f.length!==0&&this._moveCallback(o,f,l)},this._triggerPointerEnd=(l,o)=>{if(!Wt(o)&&o.buttons&1)return!1;const u=this.currentPointers.findIndex(d=>d.id===l.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(l.id);const f=!(o.type==="mouseup"||o.type==="touchend"||o.type==="pointerup");return this._endCallback(l,o,f),!0},this._pointerEnd=l=>{if(this._triggerPointerEnd(new Fe(l),l))if(lt(l)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=l=>{for(const o of Array.from(l.changedTouches))this._triggerPointerEnd(new Fe(o),l)},this._startCallback=n,this._moveCallback=i,this._endCallback=s,this._rawUpdates=a&&"onpointerrawupdate"in window,self.PointerEvent&&!r?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,n){return this._startCallback(e,n)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}function Mn(t,e=void 0){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function Cn(t,e=void 0){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}var Oe,ke,He,ft,Jt,ct,Qt,Pt,si,dt,$t,Bt,ai;const Ge=class Ge extends Hi{constructor(n){super();fe(this,ft);fe(this,ct);fe(this,Pt);fe(this,dt);fe(this,Bt);fe(this,Oe,void 0);fe(this,ke,new DOMMatrix);fe(this,He,void 0);Ae(this,Oe,n),z(this,Oe).addEventListener("wheel",pe(this,ft,Jt).bind(this)),Ae(this,He,new ji(z(this,Oe),{start:(i,s)=>z(this,He).currentPointers.length===2?!1:(s.preventDefault(),!0),move:i=>{pe(this,Pt,si).call(this,i,z(this,He).currentPointers)},avoidPointerEvents:pe(this,Bt,ai).call(this)})),z(this,Oe).addEventListener("wheel",pe(this,ft,Jt).bind(this))}get x(){return z(this,ke).e}get y(){return z(this,ke).f}get scale(){return z(this,ke).a}set x(n){z(this,ke).e=n}set y(n){z(this,ke).f=n}set scale(n){z(this,ke).a=n,z(this,ke).d=n}reset(){pe(this,dt,$t).call(this,1,0,0)}destroy(){z(this,He).stop()}};Oe=new WeakMap,ke=new WeakMap,He=new WeakMap,ft=new WeakSet,Jt=function(n){n.preventDefault();const i=z(this,Oe).getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:a,deltaMode:r}=n;r===1&&(s*=15);const l=s>0,o=a?100:300,u=1-(l?-s:s)/o,f=l?1/u:u,d=n.clientX-i.left,c=n.clientY-i.top;pe(this,ct,Qt).call(this,{scaleDiff:f,originX:d,originY:c})},ct=new WeakSet,Qt=function(n={}){const{panX:i=0,panY:s=0,originX:a=0,originY:r=0,scaleDiff:l=1}=n,o=new DOMMatrix().translate(a,r).scale(l).translate(-a,-r),u=new DOMMatrix().translate(i,s);o.multiplySelf(u),o.multiplySelf(z(this,ke));const f=o.a,d=o.e,c=o.f;pe(this,dt,$t).call(this,f,d,c)},Pt=new WeakSet,si=function(n,i){const s=z(this,Oe).getBoundingClientRect(),a=Cn(n[0],n[1]),r=Cn(i[0],i[1]),l=a.clientX-s.left,o=a.clientY-s.top,u=Mn(n[0],n[1]),f=Mn(i[0],i[1]),d=u?f/u:1;pe(this,ct,Qt).call(this,{originX:l,originY:o,scaleDiff:d,panX:r.clientX-a.clientX,panY:r.clientY-a.clientY})},dt=new WeakSet,$t=function(n,i,s){if(n<Ge.MIN_SCALE||n>Ge.MAX_SCALE||n===this.scale&&i===this.x&&s===this.y)return;this.x=i,this.y=s,this.scale=n;const a=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:z(this,ke)}});this.dispatchTypedEvent("panzoom:change",a)},Bt=new WeakSet,ai=function(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)},Le(Ge,"MIN_SCALE",.01),Le(Ge,"MAX_SCALE",1e5);let Kt=Ge;function en(t,e,n){return Math.min(Math.max(t,e),n)}const Yi=t=>({}),In=t=>({}),qi=t=>({}),Sn=t=>({});function Zi(t){let e,n,i,s,a,r,l,o,u,f,d,c,g,b;const m=t[7].left,E=Ct(m,t,t[6],Sn),_=t[7].right,v=Ct(_,t,t[6],In);return d=new De({props:{src:Pi,class:"h-6 w-6 text-white"}}),{c(){e=k("div"),n=k("div"),i=k("div"),s=k("div"),E&&E.c(),a=P(),r=k("div"),l=k("div"),v&&v.c(),o=P(),u=k("div"),f=k("div"),H(d.$$.fragment),this.h()},l(M){e=y(M,"DIV",{class:!0});var A=I(e);n=y(A,"DIV",{class:!0});var V=I(n);i=y(V,"DIV",{class:!0});var X=I(i);s=y(X,"DIV",{style:!0,class:!0});var U=I(s);E&&E.l(U),U.forEach(p),X.forEach(p),a=B(V),r=y(V,"DIV",{class:!0});var C=I(r);l=y(C,"DIV",{style:!0,class:!0});var S=I(l);v&&v.l(S),S.forEach(p),C.forEach(p),V.forEach(p),o=B(A),u=y(A,"DIV",{class:!0});var L=I(u);f=y(L,"DIV",{class:!0});var G=I(f);j(d.$$.fragment,G),G.forEach(p),L.forEach(p),A.forEach(p),this.h()},h(){h(s,"style",t[3]),h(s,"class","grid h-full w-full origin-top-left place-items-center"),h(i,"class","mask-left svelte-allpn0"),h(l,"style",t[3]),h(l,"class","grid h-full w-full origin-top-left place-items-center"),h(r,"class","mask-right svelte-allpn0"),h(n,"class","grid h-full w-full place-items-center"),h(f,"class","absolute left-1/2 top-1/2 grid h-12 w-12 -translate-x-1/2 -translate-y-1/2 transform place-items-center rounded-full bg-black"),Re(f,"rotate-90",t[0]==="vertical"),h(u,"class","handle relative shadow-lg svelte-allpn0"),h(e,"class","pz-container svelte-allpn0"),Re(e,"vertical",t[0]==="vertical"),Se(e,"--split-point",t[1]+"%")},m(M,A){O(M,e,A),w(e,n),w(n,i),w(i,s),E&&E.m(s,null),w(n,a),w(n,r),w(r,l),v&&v.m(l,null),w(e,o),w(e,u),w(u,f),Y(d,f,null),t[8](e),c=!0,g||(b=[et(t[5].call(null,n)),et(t[4].call(null,u)),ee(u,"pointercancel",Gt(xi))],g=!0)},p(M,[A]){E&&E.p&&(!c||A&64)&&It(E,m,M,M[6],c?Tt(m,M[6],A,qi):St(M[6]),Sn),(!c||A&8)&&h(s,"style",M[3]),v&&v.p&&(!c||A&64)&&It(v,_,M,M[6],c?Tt(_,M[6],A,Yi):St(M[6]),In),(!c||A&8)&&h(l,"style",M[3]),(!c||A&1)&&Re(f,"rotate-90",M[0]==="vertical"),(!c||A&1)&&Re(e,"vertical",M[0]==="vertical"),A&2&&Se(e,"--split-point",M[1]+"%")},i(M){c||(R(E,M),R(v,M),R(d.$$.fragment,M),c=!0)},o(M){N(E,M),N(v,M),N(d.$$.fragment,M),c=!1},d(M){M&&p(e),E&&E.d(M),v&&v.d(M),q(d),t[8](null),g=!1,ze(b)}}}const xi=()=>{};function Gi(t,e,n){let{$$slots:i={},$$scope:s}=e,{direction:a="horizontal"}=e,r=null,{split:l=50}=e;function o(c){return c.addEventListener("pointerdown",g=>{const b=a==="vertical"?g.clientY:g.clientX,m=l,E=document.body.style.cursor;document.body.style.cursor=a==="vertical"?"ns-resize":"ew-resize";const _=M=>{const A=r?r.clientWidth:window.innerWidth,V=r?r.clientHeight:window.innerHeight,X=a==="vertical"?V:A,C=(a==="vertical"?M.clientY:M.clientX)-b,S=m+C/X*100;n(1,l=en(S,0,100))},v=()=>{document.body.style.cursor=E,window.removeEventListener("pointermove",_),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v)};window.addEventListener("pointermove",_),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v)}),{destroy(){c.removeEventListener("pointerdown",()=>{})}}}let u="transform: none;";function f(c){const g=new Kt(c);function b(m){const{matrix:E}=m.detail;n(3,u=`transform: ${E.toString()};`)}return g.addEventListener("panzoom:change",b),{destroy(){g.removeEventListener("panzoom:change",b),g.destroy()}}}yi(()=>{const c=window.matchMedia("(min-width: 768px)");function g(b){n(0,a=b.matches?"horizontal":"vertical")}return c.addEventListener("change",g),g(c),()=>c.removeEventListener("change",g)});function d(c){x[c?"unshift":"push"](()=>{r=c,n(2,r)})}return t.$$set=c=>{"direction"in c&&n(0,a=c.direction),"split"in c&&n(1,l=c.split),"$$scope"in c&&n(6,s=c.$$scope)},[a,l,r,u,o,f,s,i,d]}class Ki extends oe{constructor(e){super(),le(this,e,Gi,Zi,ae,{direction:0,split:1})}}function Ji(t){let e,n,i,s;return{c(){e=k("canvas"),this.h()},l(a){e=y(a,"CANVAS",{style:!0,width:!0,height:!0,class:!0}),I(e).forEach(p),this.h()},h(){h(e,"style","image-rendering: pixelated;"),h(e,"width",t[3]),h(e,"height",t[4]),h(e,"class",t[2])},m(a,r){O(a,e,r),t[6](e),i||(s=et(n=t[5].call(null,e,{imageData:t[1],width:t[3],height:t[4]})),i=!0)},p(a,[r]){r&8&&h(e,"width",a[3]),r&16&&h(e,"height",a[4]),r&4&&h(e,"class",a[2]),n&&Ot(n.update)&&r&26&&n.update.call(null,{imageData:a[1],width:a[3],height:a[4]})},i:te,o:te,d(a){a&&p(e),t[6](null),i=!1,s()}}}function Qi(t,e,n){let{data:i}=e,{twClass:s=""}=e,{canvas:a=null}=e,{width:r=300}=e,{height:l=300}=e;function o(f,d){let c;const g=()=>{c=new OffscreenCanvas(i.width,i.height);const m=c.getContext("2d");m==null||m.putImageData(d.imageData,0,0)};g();const b=()=>{f.width=d.width,f.height=d.height;const m=f.getContext("2d");m==null||m.drawImage(c,0,0,d.width,d.height)};return b(),{update:m=>{d=m,g(),requestAnimationFrame(b)}}}function u(f){x[f?"unshift":"push"](()=>{a=f,n(0,a)})}return t.$$set=f=>{"data"in f&&n(1,i=f.data),"twClass"in f&&n(2,s=f.twClass),"canvas"in f&&n(0,a=f.canvas),"width"in f&&n(3,r=f.width),"height"in f&&n(4,l=f.height)},[a,i,s,r,l,o,u]}class $i extends oe{constructor(e){super(),le(this,e,Qi,Ji,ae,{data:1,twClass:2,canvas:0,width:3,height:4})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oi=Symbol("Comlink.proxy"),er=Symbol("Comlink.endpoint"),tr=Symbol("Comlink.releaseProxy"),Ht=Symbol("Comlink.finalizer"),Et=Symbol("Comlink.thrown"),li=t=>typeof t=="object"&&t!==null||typeof t=="function",nr={canHandle:t=>li(t)&&t[oi],serialize(t){const{port1:e,port2:n}=new MessageChannel;return fi(t,e),[n,[n]]},deserialize(t){return t.start(),Ut(t)}},ir={canHandle:t=>li(t)&&Et in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},ui=new Map([["proxy",nr],["throw",ir]]);function rr(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function fi(t,e=globalThis,n=["*"]){e.addEventListener("message",function i(s){if(!s||!s.data)return;if(!rr(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:a,type:r,path:l}=Object.assign({path:[]},s.data),o=(s.data.argumentList||[]).map(We);let u;try{const f=l.slice(0,-1).reduce((c,g)=>c[g],t),d=l.reduce((c,g)=>c[g],t);switch(r){case"GET":u=d;break;case"SET":f[l.slice(-1)[0]]=We(s.data.value),u=!0;break;case"APPLY":u=d.apply(f,o);break;case"CONSTRUCT":{const c=new d(...o);u=ur(c)}break;case"ENDPOINT":{const{port1:c,port2:g}=new MessageChannel;fi(t,g),u=mi(c,[c])}break;case"RELEASE":u=void 0;break;default:return}}catch(f){u={value:f,[Et]:0}}Promise.resolve(u).catch(f=>({value:f,[Et]:0})).then(f=>{const[d,c]=Dt(f);e.postMessage(Object.assign(Object.assign({},d),{id:a}),c),r==="RELEASE"&&(e.removeEventListener("message",i),ci(e),Ht in t&&typeof t[Ht]=="function"&&t[Ht]())}).catch(f=>{const[d,c]=Dt({value:new TypeError("Unserializable return value"),[Et]:0});e.postMessage(Object.assign(Object.assign({},d),{id:a}),c)})}),e.start&&e.start()}function sr(t){return t.constructor.name==="MessagePort"}function ci(t){sr(t)&&t.close()}function Ut(t,e){return tn(t,[],e)}function wt(t){if(t)throw new Error("Proxy has been released and is not useable")}function di(t){return xe(t,{type:"RELEASE"}).then(()=>{ci(t)})}const At=new WeakMap,Rt="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(At.get(t)||0)-1;At.set(t,e),e===0&&di(t)});function ar(t,e){const n=(At.get(e)||0)+1;At.set(e,n),Rt&&Rt.register(t,e,t)}function or(t){Rt&&Rt.unregister(t)}function tn(t,e=[],n=function(){}){let i=!1;const s=new Proxy(n,{get(a,r){if(wt(i),r===tr)return()=>{or(s),di(t),i=!0};if(r==="then"){if(e.length===0)return{then:()=>s};const l=xe(t,{type:"GET",path:e.map(o=>o.toString())}).then(We);return l.then.bind(l)}return tn(t,[...e,r])},set(a,r,l){wt(i);const[o,u]=Dt(l);return xe(t,{type:"SET",path:[...e,r].map(f=>f.toString()),value:o},u).then(We)},apply(a,r,l){wt(i);const o=e[e.length-1];if(o===er)return xe(t,{type:"ENDPOINT"}).then(We);if(o==="bind")return tn(t,e.slice(0,-1));const[u,f]=Tn(l);return xe(t,{type:"APPLY",path:e.map(d=>d.toString()),argumentList:u},f).then(We)},construct(a,r){wt(i);const[l,o]=Tn(r);return xe(t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:l},o).then(We)}});return ar(s,t),s}function lr(t){return Array.prototype.concat.apply([],t)}function Tn(t){const e=t.map(Dt);return[e.map(n=>n[0]),lr(e.map(n=>n[1]))]}const hi=new WeakMap;function mi(t,e){return hi.set(t,e),t}function ur(t){return Object.assign(t,{[oi]:!0})}function Dt(t){for(const[e,n]of ui)if(n.canHandle(t)){const[i,s]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},s]}return[{type:"RAW",value:t},hi.get(t)||[]]}function We(t){switch(t.type){case"HANDLER":return ui.get(t.name).deserialize(t.value);case"RAW":return t.value}}function xe(t,e,n){return new Promise(i=>{const s=fr();t.addEventListener("message",function a(r){!r.data||!r.data.id||r.data.id!==s||(t.removeEventListener("message",a),i(r.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),n)})}function fr(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function cr(t){return new Worker(""+new URL("../workers/renderingWorker-mGRUq8q1.js",import.meta.url).href,{name:t==null?void 0:t.name})}function dr(t,e){const n=t.transferControlToOffscreen(),i=new cr,s=Ut(i);let a=null,r=null,l=()=>{};return s.errorDiffusionDithering(mi(n,[n]),e).then(o=>{r=o.update,l=o.destroy,r(a||e)}),{update:o=>{r?r(o):a=o},destroy:()=>{l(),i.terminate()}}}var hr="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",mr="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform sampler2D uNoiseSampler;uniform sampler2D uPaletteSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform vec2 uSize;vec3 samplePalette(vec3 glsl_color){vec3 scaledColor=floor(glsl_color*255.0);vec3 quantized_color=floor(scaledColor/16.0)*16.0;float mappingI=floor((floor(quantized_color.r)+floor(quantized_color.g*16.0)+floor(quantized_color.b*16.0*16.0))/16.0);float mappedX=floor(mappingI/64.0);float mappedY=floor(mod(mappingI,64.0));float halfPixel=0.5/64.0;vec2 uv=vec2((mappedX/64.0)+halfPixel,1.0-(mappedY/64.0)-halfPixel);return texture2D(uPaletteSampler,uv).rgb;}void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);color.r=clamp(color.r+noise,0.0,1.0);color.g=clamp(color.g+noise,0.0,1.0);color.b=clamp(color.b+noise,0.0,1.0);color.rgb=samplePalette(color.rgb);gl_FragColor=color;}";function Ln(t){return(t&t-1)===0}function gr(t,e,n){const i=An(t,t.VERTEX_SHADER,e),s=An(t,t.FRAGMENT_SHADER,n),a=t.createProgram();if(!a)throw new Error("Failed to create shader program");if(t.attachShader(a,i),t.attachShader(a,s),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${t.getProgramInfoLog(a)}`);return a}function An(t,e,n){const i=t.createShader(e);if(!i)throw new Error("Failed to create shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(i)}`);return i}function _r(t){const e=t.createBuffer(),n=t.createBuffer(),i=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),t.STATIC_DRAW),{vertex_buffer:e,index_buffer:n}}function jt(t,e,n){const i=t.createTexture();if(!i)throw new Error("Failed to create texture");return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),Ln(e.width)&&Ln(e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)),i}function pr(t,e){let n=e;const i=t.getContext("webgl",{preserveDrawingBuffer:!0});if(!i){alert("WebGL not supported");return}i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);const s=gr(i,hr,mr),{vertex_buffer:a,index_buffer:r}=_r(i);i.useProgram(s);const l=i.getAttribLocation(s,"position");i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l);const o=i.getUniformLocation(s,"uSampler"),u=i.getUniformLocation(s,"uNoiseSampler"),f=i.getUniformLocation(s,"uNoise"),d=i.getUniformLocation(s,"uSize"),c=i.getUniformLocation(s,"uNoiseSamplerSize"),g=i.getUniformLocation(s,"uPaletteSampler");let b;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0);const m=()=>{b&&i.deleteTexture(b),b=jt(i,n.image,i.LINEAR)};m();let E,_,v=null;const M=()=>{E&&i.deleteTexture(E),E=jt(i,n.thresholdMap,i.NEAREST),_={width:n.thresholdMap.width,height:n.thresholdMap.height}};M();let A;const V=()=>{A&&i.deleteTexture(A),A=jt(i,n.palette,i.NEAREST)};V();const X=()=>{i.viewport(0,0,n.output_width,n.output_height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,a),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,b),i.uniform1i(o,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,E),i.uniform1i(u,1),i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,A),i.uniform1i(g,2),i.uniform2f(c,_.width,_.height),i.uniform1f(f,n.noiseIntensity),i.uniform2f(d,n.output_width,n.output_height),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)};function U(){v=requestAnimationFrame(()=>{X(),v=null})}return U(),{update(C){const S=n.image!==C.image,L=n.thresholdMap!==C.thresholdMap,G=n.palette!==C.palette;n=C,S&&m(),L&&M(),G&&V(),U()},destroy(){v!==null&&cancelAnimationFrame(v)}}}function vr(t){let e,n,i;function s(r){t[5](r)}let a={data:t[1],width:t[2].width,height:t[2].height,twClass:"w-full"};return t[0]!==void 0&&(a.canvas=t[0]),e=new $i({props:a}),x.push(()=>$(e,"canvas",s)),{c(){H(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,l){Y(e,r,l),i=!0},p(r,l){const o={};l&2&&(o.data=r[1]),l&4&&(o.width=r[2].width),l&4&&(o.height=r[2].height),!n&&l&1&&(n=!0,o.canvas=r[0],Q(()=>n=!1)),e.$set(o)},i(r){i||(R(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function br(t){let e,n=t[2].thresholdMap&&t[2].palette&&Rn(t);return{c(){n&&n.c(),e=Lt()},l(i){n&&n.l(i),e=Lt()},m(i,s){n&&n.m(i,s),O(i,e,s)},p(i,s){i[2].thresholdMap&&i[2].palette?n?n.p(i,s):(n=Rn(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(i){i&&p(e),n&&n.d(i)}}}function wr(t){let e,n=t[2].palette&&Dn(t);return{c(){n&&n.c(),e=Lt()},l(i){n&&n.l(i),e=Lt()},m(i,s){n&&n.m(i,s),O(i,e,s)},p(i,s){i[2].palette?n?n.p(i,s):(n=Dn(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(i){i&&p(e),n&&n.d(i)}}}function Rn(t){let e,n,i,s,a,r;return{c(){e=k("canvas"),this.h()},l(l){e=y(l,"CANVAS",{class:!0,width:!0,height:!0,"aria-label":!0}),I(e).forEach(p),this.h()},h(){h(e,"class","pixelated w-full svelte-1gkt69q"),h(e,"width",n=t[2].width),h(e,"height",i=t[2].height),h(e,"aria-label","Dithered Image")},m(l,o){O(l,e,o),t[4](e),a||(r=et(s=pr.call(null,e,{image:t[1],noiseIntensity:t[2].noiseIntensity,palette:t[2].palette,output_width:t[2].width,output_height:t[2].height,thresholdMap:t[2].thresholdMap})),a=!0)},p(l,o){o&4&&n!==(n=l[2].width)&&h(e,"width",n),o&4&&i!==(i=l[2].height)&&h(e,"height",i),s&&Ot(s.update)&&o&6&&s.update.call(null,{image:l[1],noiseIntensity:l[2].noiseIntensity,palette:l[2].palette,output_width:l[2].width,output_height:l[2].height,thresholdMap:l[2].thresholdMap})},d(l){l&&p(e),t[4](null),a=!1,r()}}}function Dn(t){let e,n,i,s,a,r;return{c(){e=k("canvas"),this.h()},l(l){e=y(l,"CANVAS",{class:!0,width:!0,height:!0}),I(e).forEach(p),this.h()},h(){h(e,"class","pixelated w-full svelte-1gkt69q"),h(e,"width",n=t[2].width),h(e,"height",i=t[2].height)},m(l,o){O(l,e,o),t[3](e),a||(r=et(s=dr.call(null,e,{image:t[1],output_width:t[2].width,output_height:t[2].height,palette:t[2].palette,diffusionStrength:t[2].diffusionStrength,diffusionMatrix:t[2].diffusionMatrix,diffusionMatrixOriginX:t[2].diffusionMatrixOriginX})),a=!0)},p(l,o){o&4&&n!==(n=l[2].width)&&h(e,"width",n),o&4&&i!==(i=l[2].height)&&h(e,"height",i),s&&Ot(s.update)&&o&6&&s.update.call(null,{image:l[1],output_width:l[2].width,output_height:l[2].height,palette:l[2].palette,diffusionStrength:l[2].diffusionStrength,diffusionMatrix:l[2].diffusionMatrix,diffusionMatrixOriginX:l[2].diffusionMatrixOriginX})},d(l){l&&p(e),t[3](null),a=!1,r()}}}function Er(t){let e,n,i,s;const a=[wr,br,vr],r=[];function l(o,u){return o[2].mode==="error_diffusion"?0:o[2].mode==="ordered"?1:o[2].mode==="none"?2:-1}return~(n=l(t))&&(i=r[n]=a[n](t)),{c(){e=k("div"),i&&i.c(),this.h()},l(o){e=y(o,"DIV",{class:!0,style:!0});var u=I(e);i&&i.l(u),u.forEach(p),this.h()},h(){h(e,"class","bg-gray-200 shadow-lg"),Se(e,"width","80vmin"),Se(e,"aspect-ratio",t[1].width/t[1].height)},m(o,u){O(o,e,u),~n&&r[n].m(e,null),s=!0},p(o,[u]){let f=n;n=l(o),n===f?~n&&r[n].p(o,u):(i&&(tt(),N(r[f],1,1,()=>{r[f]=null}),nt()),~n?(i=r[n],i?i.p(o,u):(i=r[n]=a[n](o),i.c()),R(i,1),i.m(e,null)):i=null),(!s||u&2)&&Se(e,"aspect-ratio",o[1].width/o[1].height)},i(o){s||(R(i),s=!0)},o(o){N(i),s=!1},d(o){o&&p(e),~n&&r[n].d()}}}function kr(t,e,n){let{canvas:i=null}=e,{image_data:s}=e,{config:a}=e;function r(u){x[u?"unshift":"push"](()=>{i=u,n(0,i)})}function l(u){x[u?"unshift":"push"](()=>{i=u,n(0,i)})}function o(u){i=u,n(0,i)}return t.$$set=u=>{"canvas"in u&&n(0,i=u.canvas),"image_data"in u&&n(1,s=u.image_data),"config"in u&&n(2,a=u.config)},[i,s,a,r,l,o]}class gi extends oe{constructor(e){super(),le(this,e,kr,Er,ae,{canvas:0,image_data:1,config:2})}}function Pn(t,e,n){const i=t.slice();return i[4]=e[n],i}function Bn(t){let e,n,i,s=!1,a,r,l=t[4].label+"",o,u,f,d,c,g;return d=Mi(t[3][0]),{c(){e=k("label"),n=k("input"),a=P(),r=k("div"),o=ye(l),f=P(),this.h()},l(b){e=y(b,"LABEL",{class:!0});var m=I(e);n=y(m,"INPUT",{type:!0,name:!0,class:!0}),a=B(m),r=y(m,"DIV",{class:!0});var E=I(r);o=Me(E,l),E.forEach(p),f=B(m),m.forEach(p),this.h()},h(){h(n,"type","radio"),h(n,"name","tabs"),n.__value=i=t[4].value,Pe(n,n.__value),h(n,"class","sr-only"),h(r,"class",u="flex items-center justify-center border-b py-2 text-sm font-medium text-gray-700 "+(t[4].value===t[0]?"border-b-2 border-indigo-500":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5"),h(e,"class","flex-1"),d.p(n)},m(b,m){O(b,e,m),w(e,n),n.checked=n.__value===t[0],w(e,a),w(e,r),w(r,o),w(e,f),c||(g=ee(n,"change",t[2]),c=!0)},p(b,m){m&2&&i!==(i=b[4].value)&&(n.__value=i,Pe(n,n.__value),s=!0),(s||m&3)&&(n.checked=n.__value===b[0]),m&2&&l!==(l=b[4].label+"")&&Ye(o,l),m&3&&u!==(u="flex items-center justify-center border-b py-2 text-sm font-medium text-gray-700 "+(b[4].value===b[0]?"border-b-2 border-indigo-500":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5")&&h(r,"class",u)},d(b){b&&p(e),d.r(),c=!1,g()}}}function yr(t){let e,n=Ce(t[1]),i=[];for(let s=0;s<n.length;s+=1)i[s]=Bn(Pn(t,n,s));return{c(){e=k("nav");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=y(s,"NAV",{class:!0});var a=I(e);for(let r=0;r<i.length;r+=1)i[r].l(a);a.forEach(p),this.h()},h(){h(e,"class","flex w-full")},m(s,a){O(s,e,a);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,[a]){if(a&3){n=Ce(s[1]);let r;for(r=0;r<n.length;r+=1){const l=Pn(s,n,r);i[r]?i[r].p(l,a):(i[r]=Bn(l),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},i:te,o:te,d(s){s&&p(e),it(i,s)}}}function Mr(t,e,n){let{tabs:i}=e,{selected:s}=e;const a=[[]];function r(){s=this.__value,n(0,s)}return t.$$set=l=>{"tabs"in l&&n(1,i=l.tabs),"selected"in l&&n(0,s=l.selected)},[s,i,r,a]}class Cr extends oe{constructor(e){super(),le(this,e,Mr,yr,ae,{tabs:1,selected:0})}}function Ir(t){let e,n,i,s,a,r,l;return{c(){e=k("div"),n=k("label"),i=ye(t[1]),s=P(),a=k("input"),this.h()},l(o){e=y(o,"DIV",{});var u=I(e);n=y(u,"LABEL",{for:!0,class:!0});var f=I(n);i=Me(f,t[1]),f.forEach(p),s=B(u),a=y(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(p),this.h()},h(){h(n,"for",t[6]),h(n,"class","mb-2 block text-sm font-medium text-gray-900 dark:text-white"),h(a,"id",t[6]),h(a,"type","range"),h(a,"min",t[3]),h(a,"max",t[4]),h(a,"step",t[5]),h(a,"name",t[2]),h(a,"class","mb-6 h-1.5 w-full cursor-pointer appearance-none rounded-lg bg-white accent-indigo-600 shadow-sm ring-1 ring-gray-300 dark:bg-gray-700")},m(o,u){O(o,e,u),w(e,n),w(n,i),w(e,s),w(e,a),Pe(a,t[0]),r||(l=[ee(a,"change",t[7]),ee(a,"input",t[7])],r=!0)},p(o,[u]){u&2&&Ye(i,o[1]),u&8&&h(a,"min",o[3]),u&16&&h(a,"max",o[4]),u&32&&h(a,"step",o[5]),u&4&&h(a,"name",o[2]),u&1&&Pe(a,o[0])},i:te,o:te,d(o){o&&p(e),r=!1,ze(l)}}}function Sr(t,e,n){let{label:i}=e,{name:s=void 0}=e,{min:a=null}=e,{max:r=null}=e,{value:l=0}=e,{step:o=1}=e,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function f(){l=fn(this.value),n(0,l)}return t.$$set=d=>{"label"in d&&n(1,i=d.label),"name"in d&&n(2,s=d.name),"min"in d&&n(3,a=d.min),"max"in d&&n(4,r=d.max),"value"in d&&n(0,l=d.value),"step"in d&&n(5,o=d.step)},[l,i,s,a,r,o,u,f]}class cn extends oe{constructor(e){super(),le(this,e,Sr,Ir,ae,{label:1,name:2,min:3,max:4,value:0,step:5})}}function ut(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function Nn(t,e,n){const i=t.slice();return i[6]=e[n],i}function On(t){let e,n=t[6].name+"",i,s,a;return{c(){e=k("option"),i=ye(n),this.h()},l(r){e=y(r,"OPTION",{});var l=I(e);i=Me(l,n),l.forEach(p),this.h()},h(){e.__value=s=t[6].value,Pe(e,e.__value),e.selected=a=t[6].value===t[0]},m(r,l){O(r,e,l),w(e,i)},p(r,l){l&2&&n!==(n=r[6].name+"")&&Ye(i,n),l&2&&s!==(s=r[6].value)&&(e.__value=s,Pe(e,e.__value)),l&3&&a!==(a=r[6].value===r[0])&&(e.selected=a)},d(r){r&&p(e)}}}function Tr(t){let e,n,i,s,a,r,l,o=Ce(t[1]),u=[];for(let f=0;f<o.length;f+=1)u[f]=On(Nn(t,o,f));return{c(){e=k("div"),n=k("label"),i=ye(t[2]),s=P(),a=k("select");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=y(f,"DIV",{});var d=I(e);n=y(d,"LABEL",{for:!0,class:!0});var c=I(n);i=Me(c,t[2]),c.forEach(p),s=B(d),a=y(d,"SELECT",{id:!0,name:!0,class:!0});var g=I(a);for(let b=0;b<u.length;b+=1)u[b].l(g);g.forEach(p),d.forEach(p),this.h()},h(){h(n,"for",t[4]),h(n,"class","block text-sm font-medium leading-6 text-gray-900"),h(a,"id",t[4]),h(a,"name",t[3]),h(a,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),t[0]===void 0&&Ci(()=>t[5].call(a))},m(f,d){O(f,e,d),w(e,n),w(n,i),w(e,s),w(e,a);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(a,null);_n(a,t[0],!0),r||(l=ee(a,"change",t[5]),r=!0)},p(f,[d]){if(d&4&&Ye(i,f[2]),d&3){o=Ce(f[1]);let c;for(c=0;c<o.length;c+=1){const g=Nn(f,o,c);u[c]?u[c].p(g,d):(u[c]=On(g),u[c].c(),u[c].m(a,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=o.length}d&8&&h(a,"name",f[3]),d&3&&_n(a,f[0])},i:te,o:te,d(f){f&&p(e),it(u,f),r=!1,l()}}}function Lr(t,e,n){let{options:i}=e,{selected:s}=e,{label:a}=e,{name:r=void 0}=e;const l=ut();function o(){s=Ii(this),n(0,s),n(1,i)}return t.$$set=u=>{"options"in u&&n(1,i=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,a=u.label),"name"in u&&n(3,r=u.name)},[s,i,a,r,l,o]}class _i extends oe{constructor(e){super(),le(this,e,Lr,Tr,ae,{options:1,selected:0,label:2,name:3})}}function Ar(t){let e,n,i,s,a,r;function l(d){t[5](d)}let o={label:"Diffusion Mode",options:t[2]};t[1]!==void 0&&(o.selected=t[1]),e=new _i({props:o}),x.push(()=>$(e,"selected",l));function u(d){t[6](d)}let f={label:"Diffusion Strength ("+t[0]+")",min:0,max:2,step:.01};return t[0]!==void 0&&(f.value=t[0]),s=new cn({props:f}),x.push(()=>$(s,"value",u)),{c(){H(e.$$.fragment),i=P(),H(s.$$.fragment)},l(d){j(e.$$.fragment,d),i=B(d),j(s.$$.fragment,d)},m(d,c){Y(e,d,c),O(d,i,c),Y(s,d,c),r=!0},p(d,[c]){const g={};!n&&c&2&&(n=!0,g.selected=d[1],Q(()=>n=!1)),e.$set(g);const b={};c&1&&(b.label="Diffusion Strength ("+d[0]+")"),!a&&c&1&&(a=!0,b.value=d[0],Q(()=>a=!1)),s.$set(b)},i(d){r||(R(e.$$.fragment,d),R(s.$$.fragment,d),r=!0)},o(d){N(e.$$.fragment,d),N(s.$$.fragment,d),r=!1},d(d){d&&p(i),q(e,d),q(s,d)}}}function Rr(t,e,n){let{diffusionStrength:i}=e,{diffusionMatrix:s}=e,{diffusionOriginX:a}=e,r="floyd_steinberg";const l=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],o={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function u(d){r=d,n(1,r)}function f(d){i=d,n(0,i)}return t.$$set=d=>{"diffusionStrength"in d&&n(0,i=d.diffusionStrength),"diffusionMatrix"in d&&n(3,s=d.diffusionMatrix),"diffusionOriginX"in d&&n(4,a=d.diffusionOriginX)},t.$$.update=()=>{if(t.$$.dirty&2){const{matrix:d,originX:c}=o[r];n(3,s=d),n(4,a=c)}},[i,r,l,s,a,u,f]}class Dr extends oe{constructor(e){super(),le(this,e,Rr,Ar,ae,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function Yt(t){const e=t.toString(16);return e.length==1?"0"+e:e}function Pr(t,e,n){return"#"+Yt(t)+Yt(e)+Yt(n)}function Un(t,e,n){const i=t.slice();i[6]=e[n],i[9]=n;const s=Pr(...i[6]);return i[7]=s,i}function Xn(t){let e,n,i,s,a,r,l,o,u;function f(...c){return t[4](t[9],...c)}r=new De({props:{src:ri,class:"h-4 w-4 text-white"}});function d(){return t[5](t[9])}return{c(){e=k("li"),n=k("input"),s=P(),a=k("button"),H(r.$$.fragment),this.h()},l(c){e=y(c,"LI",{style:!0,class:!0});var g=I(e);n=y(g,"INPUT",{type:!0,class:!0}),s=B(g),a=y(g,"BUTTON",{class:!0});var b=I(a);j(r.$$.fragment,b),b.forEach(p),g.forEach(p),this.h()},h(){h(n,"type","color"),n.value=i=t[7],h(n,"class","absolute inset-0 h-full w-full opacity-0"),h(a,"class","absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-black bg-opacity-40 p-1"),Se(e,"background-color",t[7]),h(e,"class","relative h-10 rounded-md")},m(c,g){O(c,e,g),w(e,n),w(e,s),w(e,a),Y(r,a,null),l=!0,o||(u=[ee(n,"input",f),ee(a,"click",d)],o=!0)},p(c,g){t=c,(!l||g&1&&i!==(i=t[7]))&&(n.value=i),(!l||g&1)&&Se(e,"background-color",t[7])},i(c){l||(R(r.$$.fragment,c),l=!0)},o(c){N(r.$$.fragment,c),l=!1},d(c){c&&p(e),q(r),o=!1,ze(u)}}}function Br(t){let e,n,i,s,a,r,l,o="Color",u,f,d,c=Ce(t[0]),g=[];for(let m=0;m<c.length;m+=1)g[m]=Xn(Un(t,c,m));const b=m=>N(g[m],1,1,()=>{g[m]=null});return a=new De({props:{src:ii,class:"h-4 w-4"}}),{c(){e=k("ul");for(let m=0;m<g.length;m+=1)g[m].c();n=P(),i=k("li"),s=k("button"),H(a.$$.fragment),r=P(),l=k("span"),l.textContent=o,this.h()},l(m){e=y(m,"UL",{class:!0});var E=I(e);for(let M=0;M<g.length;M+=1)g[M].l(E);n=B(E),i=y(E,"LI",{});var _=I(i);s=y(_,"BUTTON",{class:!0});var v=I(s);j(a.$$.fragment,v),r=B(v),l=y(v,"SPAN",{"data-svelte-h":!0}),ve(l)!=="svelte-kbgbcv"&&(l.textContent=o),v.forEach(p),_.forEach(p),E.forEach(p),this.h()},h(){h(s,"class","flex h-10 w-full items-center justify-center gap-1 rounded-md bg-emerald-500 text-white"),h(e,"class","grid grid-cols-3 gap-2")},m(m,E){O(m,e,E);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(e,null);w(e,n),w(e,i),w(i,s),Y(a,s,null),w(s,r),w(s,l),u=!0,f||(d=ee(s,"click",t[1]),f=!0)},p(m,[E]){if(E&13){c=Ce(m[0]);let _;for(_=0;_<c.length;_+=1){const v=Un(m,c,_);g[_]?(g[_].p(v,E),R(g[_],1)):(g[_]=Xn(v),g[_].c(),R(g[_],1),g[_].m(e,n))}for(tt(),_=c.length;_<g.length;_+=1)b(_);nt()}},i(m){if(!u){for(let E=0;E<c.length;E+=1)R(g[E]);R(a.$$.fragment,m),u=!0}},o(m){g=g.filter(Boolean);for(let E=0;E<g.length;E+=1)N(g[E]);N(a.$$.fragment,m),u=!1},d(m){m&&p(e),it(g,m),q(a),f=!1,d()}}}function Nr(){return[Math.random()*255,Math.random()*255,Math.random()*255].map(Math.round)}function Or(t,e,n){let{colors:i}=e;function s(){n(0,i=[...i,Nr()])}function a(u){n(0,i=i.filter((f,d)=>d!==u))}function r(u,f){const c=u.target.value;n(0,i[f]=me(c),i)}const l=(u,f)=>r(f,u),o=u=>a(u);return t.$$set=u=>{"colors"in u&&n(0,i=u.colors)},[i,s,a,r,l,o]}class Ur extends oe{constructor(e){super(),le(this,e,Or,Br,ae,{colors:0})}}const Xr=8,pi=5,Vn=1e3,qt=pi,be=Xr-pi,Vr=.75;function nn(t,e){return t<e?-1:t>e?1:0}var Ie,Ke,ht,Je,kt;class rn{constructor(e){fe(this,Je);fe(this,Ie,[]);fe(this,Ke,!1);fe(this,ht,void 0);Ae(this,ht,e)}push(e){z(this,Ie).push(e),Ae(this,Ke,!1)}peek(e){return pe(this,Je,kt).call(this),e===void 0&&(e=z(this,Ie).length-1),z(this,Ie)[e]}pop(){return pe(this,Je,kt).call(this),z(this,Ie).pop()}size(){return z(this,Ie).length}map(e){return z(this,Ie).map(e)}[Symbol.iterator](){return pe(this,Je,kt).call(this),z(this,Ie)[Symbol.iterator]()}}Ie=new WeakMap,Ke=new WeakMap,ht=new WeakMap,Je=new WeakSet,kt=function(){z(this,Ke)||(z(this,Ie).sort(z(this,ht)),Ae(this,Ke,!0))};var Qe,je,mt,an;const dn=class dn{constructor(e,n,i,s,a,r,l){fe(this,mt);fe(this,Qe,void 0);fe(this,je,void 0);Le(this,"r1");Le(this,"r2");Le(this,"g1");Le(this,"g2");Le(this,"b1");Le(this,"b2");Le(this,"histogram");this.r1=e,this.r2=n,this.g1=i,this.g2=s,this.b1=a,this.b2=r,this.histogram=l}volume(){return(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)}count(e=!1){if(z(this,Qe)===void 0||e){let n=0;for(const[i,s,a]of pe(this,mt,an).call(this))n+=this.histogram.sampleWithReducedColor(i,s,a);Ae(this,Qe,n)}return z(this,Qe)}copy(){return new dn(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histogram)}avg(e=!1){if(!z(this,je)||e){let n=0;const i=1<<be;let s=0,a=0,r=0;for(const[l,o,u]of pe(this,mt,an).call(this)){let f=this.histogram.sampleWithReducedColor(l,o,u);n+=f,s+=f*(l+.5)*i,a+=f*(o+.5)*i,r+=f*(u+.5)*i}n>0?Ae(this,je,[Math.floor(s/n),Math.floor(a/n),Math.floor(r/n)]):Ae(this,je,[Math.floor(i*(this.r1+this.r2+1)/2),Math.floor(i*(this.g1+this.g2+1)/2),Math.floor(i*(this.b1+this.b2+1)/2)])}return z(this,je)}contains(e){const n=e[0]>>be,i=e[1]>>be,s=e[2]>>be;return n>=this.r1&&n<=this.r2&&i>=this.g1&&i<=this.g2&&s>=this.b1&&s<=this.b2}};Qe=new WeakMap,je=new WeakMap,mt=new WeakSet,an=function*(){for(let e=this.r1;e<=this.r2;e++)for(let n=this.g1;n<=this.g2;n++)for(let i=this.b1;i<=this.b2;i++)yield[e,n,i]};let sn=dn;var Ue;class Fr{constructor(){fe(this,Ue,void 0);Ae(this,Ue,new rn((e,n)=>nn(e.vbox.count()*e.vbox.volume(),n.vbox.count()*n.vbox.volume())))}push(e){z(this,Ue).push({vbox:e,color:e.avg()})}palette(){return z(this,Ue).map(e=>e.color)}size(){return z(this,Ue).size()}map(e){for(const n of z(this,Ue))if(n.vbox.contains(e))return n.color;return this.nearest(e)}nearest(e){let n,i,s;for(const a of z(this,Ue))i=Math.sqrt(Math.pow(e[0]-a.color[0],2)+Math.pow(e[1]-a.color[1],2)+Math.pow(e[2]-a.color[2],2)),(n===void 0||i<n)&&(n=i,s=a.color);return s}}Ue=new WeakMap;var $e;const Nt=class Nt{constructor(e){fe(this,$e,new Array(1<<3*qt));for(let n=0;n<e.length;n+=4){let i=e[n]>>be,s=e[n+1]>>be,a=e[n+2]>>be,r=Nt.getColorIndex(i,s,a);z(this,$e)[r]=(z(this,$e)[r]??0)+1}}sample(e,n,i){const s=e>>be,a=n>>be,r=i>>be;return this.sampleWithReducedColor(s,a,r)}sampleWithReducedColor(e,n,i){const s=Nt.getColorIndex(e,n,i);return z(this,$e)[s]??0}static getColorIndex(e,n,i){return(e<<2*qt)+(n<<qt)+i}};$e=new WeakMap;let on=Nt;function zr(t,e){let n=1e6,i=0,s=1e6,a=0,r=1e6,l=0;for(let o=0;o<t.length;o+=4){const u=t[o]>>be,f=t[o+1]>>be,d=t[o+2]>>be;u<n?n=u:u>i&&(i=u),f<s?s=f:f>a&&(a=f),d<r?r=d:d>l&&(l=d)}return new sn(n,i,s,a,r,l,e)}function Wr(t,e,n,i,s){const a=s+"1",r=s+"2";for(let l=t[a];l<=t[r];l++)if(e[l]>i/2){let o=t.copy(),u=t.copy(),f=l-t[a],d=t[r]-l,c,g=0;for(f<=d?c=Math.min(t[r]-1,~~(l+d/2)):c=Math.max(t[a],~~(l-1-f/2));!e[c];)c++;for(g=n[c];!g&&e[c-1];)g=n[--c];return o[r]=c,u[a]=o[r]+1,[o,u]}throw new Error("VBox can't be cut")}function Hr(t,e){if(!e.count())return[e.copy(),void 0];const n=e.r2-e.r1+1,i=e.g2-e.g1+1,s=e.b2-e.b1+1,a=Math.max(n,i,s);if(e.count()==1)return[e.copy(),void 0];let r=0;const l=[],o=[];if(a==n)for(let f=e.r1;f<=e.r2;f++){let d=0;for(let c=e.g1;c<=e.g2;c++)for(let g=e.b1;g<=e.b2;g++)d+=t.sampleWithReducedColor(f,c,g);r+=d,l[f]=r}else if(a==i)for(let f=e.g1;f<=e.g2;f++){let d=0;for(let c=e.r1;c<=e.r2;c++)for(let g=e.b1;g<=e.b2;g++)d+=t.sampleWithReducedColor(c,f,g);r+=d,l[f]=r}else if(a==s)for(let f=e.b1;f<=e.b2;f++){let d=0;for(let c=e.r1;c<=e.r2;c++)for(let g=e.g1;g<=e.g2;g++)d+=t.sampleWithReducedColor(c,g,f);r+=d,l[f]=r}else throw new Error("Not Reached");l.forEach(function(f,d){o[d]=r-f});const u=a==n?"r":a==i?"g":"b";return Wr(e,l,o,r,u)}function jr(t,e){if(t.length<4||e<2||e>256)throw new Error("Invalid Arguments. There must be at least one pixel, and the max color must be between 2 and 256");const n=new on(t),i=zr(t,n),s=new rn((o,u)=>nn(o.count(),u.count()));s.push(i);const a=(o,u)=>{let f=o.size(),d=0,c;for(;d<Vn;){if(f>=u||d++>Vn)return;if(c=o.pop(),!c||c.count()===0){c&&o.push(c),d++;continue}const[g,b]=Hr(n,c);o.push(g),b&&(o.push(b),f++)}};a(s,Vr*e);const r=new rn(function(o,u){return nn(o.count()*o.volume(),u.count()*u.volume())});for(;s.size();){const o=s.pop();if(!o)throw new Error("VBox is null");r.push(o)}a(r,e);const l=new Fr;for(;r.size();){const o=r.pop();if(!o)throw new Error("VBox is null");l.push(o)}return l}function Yr(t,e,n=10){const i=qr(t.data,n),s=jr(i,e),a=s?s.palette():null;return console.log(a,e),a}function qr(t,e){const n=Math.floor(t.length/4),i=Math.max(1,Math.round(n/e)),s=new Uint8ClampedArray(i*4);for(let a=0;a<i;a++){const r=Math.round(a*n/i);s[a*4+0]=t[r*4+0],s[a*4+1]=t[r*4+1],s[a*4+2]=t[r*4+2],s[a*4+3]=t[r*4+3]}return s}function Zr(t){return new Worker(""+new URL("../workers/worker-MGePquKK.js",import.meta.url).href,{name:t==null?void 0:t.name})}let Fn=Ut(new Zr);async function xr(t){if(!Fn)throw new Error("Worker not initialized");return await Fn.generatePalette(t)}function zn(t){let e,n,i,s,a;return{c(){e=k("span"),n=k("span"),i=ye(t[2]),s=P(),a=ye(t[3]),this.h()},l(r){e=y(r,"SPAN",{id:!0,class:!0});var l=I(e);n=y(l,"SPAN",{class:!0});var o=I(n);i=Me(o,t[2]),s=B(o),o.forEach(p),a=Me(l,t[3]),l.forEach(p),this.h()},h(){h(n,"class","sr-only"),h(e,"id",t[6]),h(e,"class","text-gray-500")},m(r,l){O(r,e,l),w(e,n),w(n,i),w(n,s),w(e,a)},p(r,l){l&4&&Ye(i,r[2]),l&8&&Ye(a,r[3])},d(r){r&&p(e)}}}function Gr(t){let e,n,i,s,a,r,l,o,u,f,d,c=t[3]&&zn(t);return{c(){e=k("div"),n=k("div"),i=k("input"),a=P(),r=k("div"),l=k("label"),o=ye(t[2]),u=P(),c&&c.c(),this.h()},l(g){e=y(g,"DIV",{class:!0});var b=I(e);n=y(b,"DIV",{class:!0});var m=I(n);i=y(m,"INPUT",{id:!0,"aria-describedby":!0,name:!0,type:!0,class:!0}),m.forEach(p),a=B(b),r=y(b,"DIV",{class:!0});var E=I(r);l=y(E,"LABEL",{for:!0,class:!0});var _=I(l);o=Me(_,t[2]),_.forEach(p),u=B(E),c&&c.l(E),E.forEach(p),b.forEach(p),this.h()},h(){h(i,"id",t[5]),h(i,"aria-describedby",s=t[3]?t[6]:void 0),h(i,"name",t[4]),h(i,"type","checkbox"),h(i,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),h(n,"class","flex h-6 items-center"),h(l,"for",t[5]),h(l,"class","font-medium text-gray-900"),h(r,"class","ml-3 text-sm leading-6"),h(e,"class","relative flex items-start")},m(g,b){O(g,e,b),w(e,n),w(n,i),t[9](i),i.checked=t[0],w(e,a),w(e,r),w(r,l),w(l,o),w(r,u),c&&c.m(r,null),f||(d=[ee(i,"input",t[7]),ee(i,"change",t[8]),ee(i,"change",t[10])],f=!0)},p(g,[b]){b&8&&s!==(s=g[3]?g[6]:void 0)&&h(i,"aria-describedby",s),b&16&&h(i,"name",g[4]),b&1&&(i.checked=g[0]),b&4&&Ye(o,g[2]),g[3]?c?c.p(g,b):(c=zn(g),c.c(),c.m(r,null)):c&&(c.d(1),c=null)},i:te,o:te,d(g){g&&p(e),t[9](null),c&&c.d(),f=!1,ze(d)}}}function Kr(t,e,n){let{checked:i=!1}=e,{label:s}=e,{description:a=void 0}=e,{name:r=void 0}=e,{input:l=null}=e;const o=ut(),u=ut();function f(b){xt.call(this,t,b)}function d(b){xt.call(this,t,b)}function c(b){x[b?"unshift":"push"](()=>{l=b,n(1,l)})}function g(){i=this.checked,n(0,i)}return t.$$set=b=>{"checked"in b&&n(0,i=b.checked),"label"in b&&n(2,s=b.label),"description"in b&&n(3,a=b.description),"name"in b&&n(4,r=b.name),"input"in b&&n(1,l=b.input)},[i,l,s,a,r,o,u,f,d,c,g]}class vi extends oe{constructor(e){super(),le(this,e,Kr,Gr,ae,{checked:0,label:2,description:3,name:4,input:1})}}function Wn(t,e,n){const i=t.slice();return i[15]=e[n].name,i[17]=n,i}function Jr(t){let e,n,i="Choose a Preset ",s,a,r=Ce(t[4]),l=[];for(let o=0;o<r.length;o+=1)l[o]=Hn(Wn(t,r,o));return{c(){e=k("select"),n=k("option"),n.textContent=i;for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=y(o,"SELECT",{class:!0});var u=I(e);n=y(u,"OPTION",{"data-svelte-h":!0}),ve(n)!=="svelte-1lt3s2"&&(n.textContent=i);for(let f=0;f<l.length;f+=1)l[f].l(u);u.forEach(p),this.h()},h(){n.__value=-1,Pe(n,n.__value),n.selected=!0,n.disabled=!0,h(e,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6")},m(o,u){O(o,e,u),w(e,n);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);s||(a=ee(e,"input",t[5]),s=!0)},p(o,u){if(u&16){r=Ce(o[4]);let f;for(f=0;f<r.length;f+=1){const d=Wn(o,r,f);l[f]?l[f].p(d,u):(l[f]=Hn(d),l[f].c(),l[f].m(e,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=r.length}},d(o){o&&p(e),it(l,o),s=!1,a()}}}function Qr(t){let e,n,i="Number of Colors",s,a,r,l;return{c(){e=k("label"),n=k("span"),n.textContent=i,s=P(),a=k("input"),this.h()},l(o){e=y(o,"LABEL",{class:!0});var u=I(e);n=y(u,"SPAN",{class:!0,"data-svelte-h":!0}),ve(n)!=="svelte-19irpk9"&&(n.textContent=i),s=B(u),a=y(u,"INPUT",{type:!0,min:!0,max:!0,class:!0}),u.forEach(p),this.h()},h(){h(n,"class","text-sm font-medium text-gray-900"),h(a,"type","number"),h(a,"min",un),h(a,"max",ln),h(a,"class","block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),h(e,"class","flex items-center justify-between")},m(o,u){O(o,e,u),w(e,n),w(e,s),w(e,a),Pe(a,t[2]),r||(l=[ee(a,"input",t[11]),ee(a,"blur",t[12]),ee(a,"input",t[6])],r=!0)},p(o,u){u&4&&fn(a.value)!==o[2]&&Pe(a,o[2])},d(o){o&&p(e),r=!1,ze(l)}}}function Hn(t){let e,n=t[15]+"",i,s;return{c(){e=k("option"),i=ye(n),s=P(),this.h()},l(a){e=y(a,"OPTION",{});var r=I(e);i=Me(r,n),s=B(r),r.forEach(p),this.h()},h(){e.__value=t[17],Pe(e,e.__value)},m(a,r){O(a,e,r),w(e,i),w(e,s)},p:te,d(a){a&&p(e)}}}function $r(t){let e,n,i,s,a,r,l,o,u;function f(v){t[9](v)}function d(v){t[10](v)}let c={label:"Extract Colors from Image"};t[1]!==void 0&&(c.checked=t[1]),t[3]!==void 0&&(c.input=t[3]),n=new vi({props:c}),x.push(()=>$(n,"checked",f)),x.push(()=>$(n,"input",d)),n.$on("input",t[6]);function g(v,M){return v[1]?Qr:Jr}let b=g(t),m=b(t);function E(v){t[13](v)}let _={};return t[0]!==void 0&&(_.colors=t[0]),l=new Ur({props:_}),x.push(()=>$(l,"colors",E)),{c(){e=k("fieldset"),H(n.$$.fragment),a=P(),m.c(),r=P(),H(l.$$.fragment),this.h()},l(v){e=y(v,"FIELDSET",{class:!0});var M=I(e);j(n.$$.fragment,M),a=B(M),m.l(M),r=B(M),j(l.$$.fragment,M),M.forEach(p),this.h()},h(){h(e,"class","grid gap-4")},m(v,M){O(v,e,M),Y(n,e,null),w(e,a),m.m(e,null),w(e,r),Y(l,e,null),u=!0},p(v,[M]){const A={};!i&&M&2&&(i=!0,A.checked=v[1],Q(()=>i=!1)),!s&&M&8&&(s=!0,A.input=v[3],Q(()=>s=!1)),n.$set(A),b===(b=g(v))&&m?m.p(v,M):(m.d(1),m=b(v),m&&(m.c(),m.m(e,r)));const V={};!o&&M&1&&(o=!0,V.colors=v[0],Q(()=>o=!1)),l.$set(V)},i(v){u||(R(n.$$.fragment,v),R(l.$$.fragment,v),u=!0)},o(v){N(n.$$.fragment,v),N(l.$$.fragment,v),u=!1},d(v){v&&p(e),q(n),m.d(),q(l)}}}const ln=256,un=2;function es(t,e,n){let{image:i=null}=e,{palette:s=null}=e,{colors:a=["#000000","#ffffff"].map(me)}=e;const r=[{name:"Black and White",palette:["#000000","#ffffff"].map(me)},{name:"3Bit",palette:["#000000","#ffffff","#ff0000","#00ff00","#0000ff","#ffff00","#00ffff","#ff00ff"].map(me)},{name:"Grayscale",palette:["#000000","#333333","#666666","#999999","#cccccc","#ffffff"].map(me)},{name:"Red",palette:["#000000","#F46842","#AA2F0D","#ffffff"].map(me)},{name:"RGBY",palette:["#ff0000","#00ff00","#0000ff","#ffff00"].map(me)},{name:"Black, White, Red",palette:["#000000","#ffffff","#ff0000"].map(me)},{name:"Black, White, Yellow",palette:["#000000","#ffffff","#ffff00"].map(me)},{name:"Macintosh",palette:["#33321A","#E5FEFF"].map(me)},{name:"IBM 5151",palette:["#00EB61","#25332F"].map(me)},{name:"Zenith ZVM 1240",palette:["#40291e","#fdca55"].map(me)},{name:"Commodore 1084",palette:["#423091","#88d7de"].map(me)},{name:"IBM 8503",palette:["#25332F","#EBE5CE"].map(me)},{name:"Game Boy DMG-01",palette:["#CADC9F","#0F380F","#306230","#8BAC0F","#9BBC0F"].map(me)},{name:"MS Paint Vista",palette:["#000000","#464646","#787878","#b4b4b4","#dcdcdc","#ffffff","#990030","#9c5a3c","#ed1c24","#ffa3b1","#ff7e00","#e5aa7a","#ffc20e","#f5e49c","#fff200","#fff9bd","#a8e61d","#d3f9bc","#22b14c","#9dbb61","#00b7ef","#99d9ea","#4d6df3","#709ad1","#2f3699","#546d8e","#6f3198","#b5a5d5"].map(me)}];async function l(v,M){const A=Yr(v,M,5);if(!A)throw new Error("Failed to generate palette");return A}let o=!0,u=16;function f(v){const M=v.target,A=M.value;n(0,a=r[Number(A)].palette),M.value="-1"}let d=null;function c(){n(1,o=(d==null?void 0:d.checked)??!0),i&&o&&l(i,en(u,un,ln)).then(v=>n(0,a=v))}i&&c();function g(v){o=v,n(1,o)}function b(v){d=v,n(3,d)}function m(){u=fn(this.value),n(2,u)}const E=()=>{n(2,u=en(u,un,ln)),console.log(u)};function _(v){a=v,n(0,a)}return t.$$set=v=>{"image"in v&&n(8,i=v.image),"palette"in v&&n(7,s=v.palette),"colors"in v&&n(0,a=v.colors)},t.$$.update=()=>{t.$$.dirty&1&&xr(a).then(v=>n(7,s=v))},[a,o,u,d,r,f,c,s,i,g,b,m,E,_]}class ts extends oe{constructor(e){super(),le(this,e,es,$r,ae,{image:8,palette:7,colors:0})}}function ns(t){let e,n,i,s,a,r,l,o,u,f,d="px",c,g,b,m,E,_,v,M,A,V,X,U,C,S,L,G="px",ne,Z,de,ie;return m=new De({props:{src:Bi,class:"h-4 w-4",solid:!0}}),{c(){e=k("fieldset"),n=k("div"),i=k("label"),s=ye("Width"),r=P(),l=k("div"),o=k("input"),u=P(),f=k("div"),f.textContent=d,g=P(),b=k("span"),H(m.$$.fragment),_=P(),v=k("div"),M=k("label"),A=ye("Height"),X=P(),U=k("div"),C=k("input"),S=P(),L=k("div"),L.textContent=G,this.h()},l(F){e=y(F,"FIELDSET",{class:!0});var K=I(e);n=y(K,"DIV",{class:!0});var we=I(n);i=y(we,"LABEL",{for:!0,class:!0});var re=I(i);s=Me(re,"Width"),re.forEach(p),r=B(we),l=y(we,"DIV",{class:!0});var Ee=I(l);o=y(Ee,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),u=B(Ee),f=y(Ee,"DIV",{class:!0,"data-svelte-h":!0}),ve(f)!=="svelte-7wb550"&&(f.textContent=d),Ee.forEach(p),we.forEach(p),g=B(K),b=y(K,"SPAN",{class:!0});var se=I(b);j(m.$$.fragment,se),se.forEach(p),_=B(K),v=y(K,"DIV",{class:!0});var ce=I(v);M=y(ce,"LABEL",{for:!0,class:!0});var Be=I(M);A=Me(Be,"Height"),Be.forEach(p),X=B(ce),U=y(ce,"DIV",{class:!0});var Te=I(U);C=y(Te,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),S=B(Te),L=y(Te,"DIV",{class:!0,"data-svelte-h":!0}),ve(L)!=="svelte-7wb550"&&(L.textContent=G),Te.forEach(p),ce.forEach(p),K.forEach(p),this.h()},h(){h(i,"for","width-"+t[9]),h(i,"class",a="block text-sm font-medium leading-6 "+(t[5]?"text-gray-400":"text-gray-900")),h(o,"name","width"),h(o,"id","width-"+t[9]),h(o,"type","number"),h(o,"min",t[3]),h(o,"max",t[1]),o.disabled=t[5],h(o,"step","1"),o.value=t[0],h(o,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 disabled:cursor-not-allowed disabled:bg-white disabled:text-gray-400 disabled:ring-gray-200 sm:text-sm sm:leading-6"),h(o,"placeholder","600"),h(f,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),h(l,"class",c="relative mt-2 rounded-md "+(t[5]?"shadow-none":"shadow-sm")),h(n,"class","w-full"),h(b,"class",E="cursor-not-allowed pb-2 "+(t[5]?"text-gray-300":"text-gray-500")),h(M,"for","height-"+t[10]),h(M,"class",V="block text-sm font-medium leading-6 "+(t[5]?"text-gray-400":"text-gray-900")),h(C,"type","number"),h(C,"id","height-"+t[10]),h(C,"name","height"),h(C,"min",t[4]),h(C,"max",t[2]),h(C,"step","1"),C.value=t[6],C.disabled=t[5],h(C,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 disabled:cursor-not-allowed disabled:bg-white disabled:text-gray-400 disabled:ring-gray-200 sm:text-sm sm:leading-6"),h(C,"placeholder","340"),h(L,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),h(U,"class",ne="relative mt-2 rounded-md "+(t[5]?"shadow-none":"shadow-sm")),h(v,"class","w-full"),h(e,"class","flex items-end justify-between gap-3")},m(F,K){O(F,e,K),w(e,n),w(n,i),w(i,s),w(n,r),w(n,l),w(l,o),w(l,u),w(l,f),w(e,g),w(e,b),Y(m,b,null),w(e,_),w(e,v),w(v,M),w(M,A),w(v,X),w(v,U),w(U,C),w(U,S),w(U,L),Z=!0,de||(ie=[ee(o,"input",t[7]),ee(C,"input",t[8])],de=!0)},p(F,[K]){(!Z||K&32&&a!==(a="block text-sm font-medium leading-6 "+(F[5]?"text-gray-400":"text-gray-900")))&&h(i,"class",a),(!Z||K&8)&&h(o,"min",F[3]),(!Z||K&2)&&h(o,"max",F[1]),(!Z||K&32)&&(o.disabled=F[5]),(!Z||K&1&&o.value!==F[0])&&(o.value=F[0]),(!Z||K&32&&c!==(c="relative mt-2 rounded-md "+(F[5]?"shadow-none":"shadow-sm")))&&h(l,"class",c),(!Z||K&32&&E!==(E="cursor-not-allowed pb-2 "+(F[5]?"text-gray-300":"text-gray-500")))&&h(b,"class",E),(!Z||K&32&&V!==(V="block text-sm font-medium leading-6 "+(F[5]?"text-gray-400":"text-gray-900")))&&h(M,"class",V),(!Z||K&16)&&h(C,"min",F[4]),(!Z||K&4)&&h(C,"max",F[2]),(!Z||K&64&&C.value!==F[6])&&(C.value=F[6]),(!Z||K&32)&&(C.disabled=F[5]),(!Z||K&32&&ne!==(ne="relative mt-2 rounded-md "+(F[5]?"shadow-none":"shadow-sm")))&&h(U,"class",ne)},i(F){Z||(R(m.$$.fragment,F),Z=!0)},o(F){N(m.$$.fragment,F),Z=!1},d(F){F&&p(e),q(m),de=!1,ze(ie)}}}function is(t,e,n){let i,{width:s}=e,{aspectRatio:a}=e,{maxWidth:r=null}=e,{maxHeight:l=null}=e,{minWidth:o=null}=e,{minHeight:u=null}=e,{disabled:f=!1}=e;function d(m){const E=m.target.value;E&&(o!==null&&E<o||r!==null&&E>r||n(0,s=E))}function c(m){const E=m.target.value;E&&(u!==null&&E<u||l!==null&&E>l||n(0,s=Math.round(a*E)))}let g=ut(),b=ut();return t.$$set=m=>{"width"in m&&n(0,s=m.width),"aspectRatio"in m&&n(11,a=m.aspectRatio),"maxWidth"in m&&n(1,r=m.maxWidth),"maxHeight"in m&&n(2,l=m.maxHeight),"minWidth"in m&&n(3,o=m.minWidth),"minHeight"in m&&n(4,u=m.minHeight),"disabled"in m&&n(5,f=m.disabled)},t.$$.update=()=>{t.$$.dirty&2049&&n(6,i=Math.round(s/a))},[s,r,l,o,u,f,i,d,c,g,b,a]}class bi extends oe{constructor(e){super(),le(this,e,is,ns,ae,{width:0,aspectRatio:11,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4,disabled:5})}}const rs=t=>({}),jn=t=>({});function ss(t){let e;const n=t[2].placeholder,i=Ct(n,t,t[1],jn),s=i||os();return{c(){s&&s.c()},l(a){s&&s.l(a)},m(a,r){s&&s.m(a,r),e=!0},p(a,r){i&&i.p&&(!e||r&2)&&It(i,n,a,a[1],e?Tt(n,a[1],r,rs):St(a[1]),jn)},i(a){e||(R(s,a),e=!0)},o(a){N(s,a),e=!1},d(a){s&&s.d(a)}}}function as(t){let e,n,i,s;return{c(){e=k("canvas"),this.h()},l(a){e=y(a,"CANVAS",{class:!0,style:!0}),I(e).forEach(p),this.h()},h(){h(e,"class","max-h-96 w-full object-contain shadow-lg"),Se(e,"image-rendering","pixelated")},m(a,r){O(a,e,r),i||(s=et(n=us.call(null,e,t[0])),i=!0)},p(a,r){n&&Ot(n.update)&&r&1&&n.update.call(null,a[0])},i:te,o:te,d(a){a&&p(e),i=!1,s()}}}function os(t){let e,n="No Image";return{c(){e=k("span"),e.textContent=n},l(i){e=y(i,"SPAN",{"data-svelte-h":!0}),ve(e)!=="svelte-4c4qw"&&(e.textContent=n)},m(i,s){O(i,e,s)},p:te,d(i){i&&p(e)}}}function ls(t){let e,n,i,s;const a=[as,ss],r=[];function l(o,u){return o[0]?0:1}return n=l(t),i=r[n]=a[n](t),{c(){e=k("div"),i.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var u=I(e);i.l(u),u.forEach(p),this.h()},h(){h(e,"class","grid aspect-square w-full place-items-center rounded-lg bg-gray-100 p-8")},m(o,u){O(o,e,u),r[n].m(e,null),s=!0},p(o,[u]){let f=n;n=l(o),n===f?r[n].p(o,u):(tt(),N(r[f],1,1,()=>{r[f]=null}),nt(),i=r[n],i?i.p(o,u):(i=r[n]=a[n](o),i.c()),R(i,1),i.m(e,null))},i(o){s||(R(i),s=!0)},o(o){N(i),s=!1},d(o){o&&p(e),r[n].d()}}}function us(t,e){const n=t.getContext("2d");if(!n)return;const i=()=>{t.width=e.width,t.height=e.height,n.putImageData(e,0,0)};let s=null;const a=()=>{s||(s=requestAnimationFrame(()=>{s=null,i()}))};return a(),{destroy(){s&&cancelAnimationFrame(s)},update:r=>{e=r,a()}}}function fs(t,e,n){let{$$slots:i={},$$scope:s}=e,{imageData:a}=e;return t.$$set=r=>{"imageData"in r&&n(0,a=r.imageData),"$$scope"in r&&n(1,s=r.$$scope)},[a,s,i]}class cs extends oe{constructor(e){super(),le(this,e,fs,ls,ae,{imageData:0})}}function ds(t){return new Worker(""+new URL("../workers/worker-8idB8PbI.js",import.meta.url).href,{name:t==null?void 0:t.name})}let Zt=null;async function hs(t){return Zt||(Zt=Ut(new ds)),await Zt.generate(t)}function Yn(t){let e,n,i;function s(r){t[9](r)}let a={label:"Bayer Level ("+t[3]+")",min:0,max:5,step:1};return t[3]!==void 0&&(a.value=t[3]),e=new cn({props:a}),x.push(()=>$(e,"value",s)),{c(){H(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,l){Y(e,r,l),i=!0},p(r,l){const o={};l&8&&(o.label="Bayer Level ("+r[3]+")"),!n&&l&8&&(n=!0,o.value=r[3],Q(()=>n=!1)),e.$set(o)},i(r){i||(R(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function qn(t){let e,n,i;function s(r){t[10](r)}let a={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return t[4]!==void 0&&(a.width=t[4]),e=new bi({props:a}),x.push(()=>$(e,"width",s)),{c(){H(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,l){Y(e,r,l),i=!0},p(r,l){const o={};!n&&l&16&&(n=!0,o.width=r[4],Q(()=>n=!1)),e.$set(o)},i(r){i||(R(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function ms(t){let e,n="Loading Threshold Map";return{c(){e=k("span"),e.textContent=n,this.h()},l(i){e=y(i,"SPAN",{slot:!0,"data-svelte-h":!0}),ve(e)!=="svelte-1gdgosh"&&(e.textContent=n),this.h()},h(){h(e,"slot","placeholder")},m(i,s){O(i,e,s)},p:te,d(i){i&&p(e)}}}function gs(t){let e,n,i,s,a,r,l,o,u,f;function d(_){t[7](_)}let c={label:"Noise Intensity ("+t[1]+")",min:0,max:1.5,step:.01};t[1]!==void 0&&(c.value=t[1]),e=new cn({props:c}),x.push(()=>$(e,"value",d));function g(_){t[8](_)}let b={label:"Threshold Map",options:t[5]};t[2]!==void 0&&(b.selected=t[2]),s=new _i({props:b}),x.push(()=>$(s,"selected",g));let m=t[2]==="bayer"&&Yn(t),E=t[2]==="white_noise"&&qn(t);return u=new cs({props:{imageData:t[0],$$slots:{placeholder:[ms]},$$scope:{ctx:t}}}),{c(){H(e.$$.fragment),i=P(),H(s.$$.fragment),r=P(),m&&m.c(),l=P(),E&&E.c(),o=P(),H(u.$$.fragment)},l(_){j(e.$$.fragment,_),i=B(_),j(s.$$.fragment,_),r=B(_),m&&m.l(_),l=B(_),E&&E.l(_),o=B(_),j(u.$$.fragment,_)},m(_,v){Y(e,_,v),O(_,i,v),Y(s,_,v),O(_,r,v),m&&m.m(_,v),O(_,l,v),E&&E.m(_,v),O(_,o,v),Y(u,_,v),f=!0},p(_,[v]){const M={};v&2&&(M.label="Noise Intensity ("+_[1]+")"),!n&&v&2&&(n=!0,M.value=_[1],Q(()=>n=!1)),e.$set(M);const A={};!a&&v&4&&(a=!0,A.selected=_[2],Q(()=>a=!1)),s.$set(A),_[2]==="bayer"?m?(m.p(_,v),v&4&&R(m,1)):(m=Yn(_),m.c(),R(m,1),m.m(l.parentNode,l)):m&&(tt(),N(m,1,1,()=>{m=null}),nt()),_[2]==="white_noise"?E?(E.p(_,v),v&4&&R(E,1)):(E=qn(_),E.c(),R(E,1),E.m(o.parentNode,o)):E&&(tt(),N(E,1,1,()=>{E=null}),nt());const V={};v&1&&(V.imageData=_[0]),v&2048&&(V.$$scope={dirty:v,ctx:_}),u.$set(V)},i(_){f||(R(e.$$.fragment,_),R(s.$$.fragment,_),R(m),R(E),R(u.$$.fragment,_),f=!0)},o(_){N(e.$$.fragment,_),N(s.$$.fragment,_),N(m),N(E),N(u.$$.fragment,_),f=!1},d(_){_&&(p(i),p(r),p(l),p(o)),q(e,_),q(s,_),m&&m.d(_),E&&E.d(_),q(u,_)}}}function _s(t,e,n){let i,{thresholdMap:s}=e,{noiseIntensity:a}=e,r="bayer";const l=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let o=3,u=256;function f(b){a=b,n(1,a)}function d(b){r=b,n(2,r)}function c(b){o=b,n(3,o)}function g(b){u=b,n(4,u)}return t.$$set=b=>{"thresholdMap"in b&&n(0,s=b.thresholdMap),"noiseIntensity"in b&&n(1,a=b.noiseIntensity)},t.$$.update=()=>{if(t.$$.dirty&16&&n(6,i=u),t.$$.dirty&92&&"ImageData"in globalThis){let b;switch(r){case"bayer":b={mode:"bayer",level:o};break;case"blue_noise":b={mode:"blue_noise"};break;case"white_noise":b={mode:"white_noise",width:u,height:i};break}hs(b).then(m=>n(0,s=m))}},[s,a,r,o,u,l,i,f,d,c,g]}class ps extends oe{constructor(e){super(),le(this,e,_s,gs,ae,{thresholdMap:0,noiseIntensity:1})}}function vs(t){let e,n,i="Output Image",s,a,r,l,o,u,f,d,c,g="Dithering Options",b,m,E,_,v,M,A,V,X,U,C,S,L,G,ne,Z,de,ie,F,K="Colors",we,re,Ee,se;function ce(T){t[5](T)}let Be={label:"Original Size"};t[2]!==void 0&&(Be.checked=t[2]),a=new vi({props:Be}),x.push(()=>$(a,"checked",ce));function Te(T){t[6](T)}let Ne={aspectRatio:t[4],minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3,disabled:t[2]};t[3]!==void 0&&(Ne.width=t[3]),o=new bi({props:Ne}),x.push(()=>$(o,"width",Te));function rt(T){t[7](T)}let st={tabs:[{label:"None",value:"none"},{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};t[0].mode!==void 0&&(st.selected=t[0].mode),m=new Cr({props:st}),x.push(()=>$(m,"selected",rt));function Xt(T){t[8](T)}function Vt(T){t[9](T)}function at(T){t[10](T)}let qe={};t[0].diffusionStrength!==void 0&&(qe.diffusionStrength=t[0].diffusionStrength),t[0].diffusionMatrix!==void 0&&(qe.diffusionMatrix=t[0].diffusionMatrix),t[0].diffusionMatrixOriginX!==void 0&&(qe.diffusionOriginX=t[0].diffusionMatrixOriginX),M=new Dr({props:qe}),x.push(()=>$(M,"diffusionStrength",Xt)),x.push(()=>$(M,"diffusionMatrix",Vt)),x.push(()=>$(M,"diffusionOriginX",at));function Ft(T){t[11](T)}function ot(T){t[12](T)}let D={};t[0].thresholdMap!==void 0&&(D.thresholdMap=t[0].thresholdMap),t[0].noiseIntensity!==void 0&&(D.noiseIntensity=t[0].noiseIntensity),L=new ps({props:D}),x.push(()=>$(L,"thresholdMap",Ft)),x.push(()=>$(L,"noiseIntensity",ot));function J(T){t[13](T)}let Xe={image:t[1]};return t[0].palette!==void 0&&(Xe.palette=t[0].palette),re=new ts({props:Xe}),x.push(()=>$(re,"palette",J)),{c(){e=k("div"),n=k("h2"),n.textContent=i,s=P(),H(a.$$.fragment),l=P(),H(o.$$.fragment),f=P(),d=k("div"),c=k("h2"),c.textContent=g,b=P(),H(m.$$.fragment),_=P(),v=k("div"),H(M.$$.fragment),C=P(),S=k("div"),H(L.$$.fragment),de=P(),ie=k("div"),F=k("h2"),F.textContent=K,we=P(),H(re.$$.fragment),this.h()},l(T){e=y(T,"DIV",{class:!0});var W=I(e);n=y(W,"H2",{class:!0,"data-svelte-h":!0}),ve(n)!=="svelte-95qrbi"&&(n.textContent=i),s=B(W),j(a.$$.fragment,W),l=B(W),j(o.$$.fragment,W),W.forEach(p),f=B(T),d=y(T,"DIV",{class:!0});var ue=I(d);c=y(ue,"H2",{class:!0,"data-svelte-h":!0}),ve(c)!=="svelte-kufgwe"&&(c.textContent=g),b=B(ue),j(m.$$.fragment,ue),_=B(ue),v=y(ue,"DIV",{class:!0});var ge=I(v);j(M.$$.fragment,ge),ge.forEach(p),C=B(ue),S=y(ue,"DIV",{class:!0});var _e=I(S);j(L.$$.fragment,_e),_e.forEach(p),ue.forEach(p),de=B(T),ie=y(T,"DIV",{class:!0});var he=I(ie);F=y(he,"H2",{class:!0,"data-svelte-h":!0}),ve(F)!=="svelte-1jy59w4"&&(F.textContent=K),we=B(he),j(re.$$.fragment,he),he.forEach(p),this.h()},h(){h(n,"class","text-base font-semibold leading-7 text-black"),h(e,"class","grid gap-4"),h(c,"class","mb-2 text-base font-semibold leading-7 text-black"),h(v,"class",U=t[0].mode==="error_diffusion"?"contents":"hidden"),h(S,"class",Z=t[0].mode==="ordered"?"contents":"hidden"),h(d,"class","grid gap-4"),h(F,"class","mb-2 text-base font-semibold leading-7 text-black"),h(ie,"class","grid gap-3"),Re(ie,"hidden",t[0].mode==="none")},m(T,W){O(T,e,W),w(e,n),w(e,s),Y(a,e,null),w(e,l),Y(o,e,null),O(T,f,W),O(T,d,W),w(d,c),w(d,b),Y(m,d,null),w(d,_),w(d,v),Y(M,v,null),w(d,C),w(d,S),Y(L,S,null),O(T,de,W),O(T,ie,W),w(ie,F),w(ie,we),Y(re,ie,null),se=!0},p(T,[W]){const ue={};!r&&W&4&&(r=!0,ue.checked=T[2],Q(()=>r=!1)),a.$set(ue);const ge={};W&16&&(ge.aspectRatio=T[4]),W&4&&(ge.disabled=T[2]),!u&&W&8&&(u=!0,ge.width=T[3],Q(()=>u=!1)),o.$set(ge);const _e={};!E&&W&1&&(E=!0,_e.selected=T[0].mode,Q(()=>E=!1)),m.$set(_e);const he={};!A&&W&1&&(A=!0,he.diffusionStrength=T[0].diffusionStrength,Q(()=>A=!1)),!V&&W&1&&(V=!0,he.diffusionMatrix=T[0].diffusionMatrix,Q(()=>V=!1)),!X&&W&1&&(X=!0,he.diffusionOriginX=T[0].diffusionMatrixOriginX,Q(()=>X=!1)),M.$set(he),(!se||W&1&&U!==(U=T[0].mode==="error_diffusion"?"contents":"hidden"))&&h(v,"class",U);const Ve={};!G&&W&1&&(G=!0,Ve.thresholdMap=T[0].thresholdMap,Q(()=>G=!1)),!ne&&W&1&&(ne=!0,Ve.noiseIntensity=T[0].noiseIntensity,Q(()=>ne=!1)),L.$set(Ve),(!se||W&1&&Z!==(Z=T[0].mode==="ordered"?"contents":"hidden"))&&h(S,"class",Z);const Ze={};W&2&&(Ze.image=T[1]),!Ee&&W&1&&(Ee=!0,Ze.palette=T[0].palette,Q(()=>Ee=!1)),re.$set(Ze),(!se||W&1)&&Re(ie,"hidden",T[0].mode==="none")},i(T){se||(R(a.$$.fragment,T),R(o.$$.fragment,T),R(m.$$.fragment,T),R(M.$$.fragment,T),R(L.$$.fragment,T),R(re.$$.fragment,T),se=!0)},o(T){N(a.$$.fragment,T),N(o.$$.fragment,T),N(m.$$.fragment,T),N(M.$$.fragment,T),N(L.$$.fragment,T),N(re.$$.fragment,T),se=!1},d(T){T&&(p(e),p(f),p(d),p(de),p(ie)),q(a),q(o),q(m),q(M),q(L),q(re)}}}function bs(t){return t?t.width/t.height:1}function ws(t,e,n){let i,{image_data:s}=e,{config:a}=e,r=!0,l=s.width;function o(_){r=_,n(2,r)}function u(_){l=_,n(3,l)}function f(_){t.$$.not_equal(a.mode,_)&&(a.mode=_,n(0,a),n(4,i),n(2,r),n(1,s),n(3,l))}function d(_){t.$$.not_equal(a.diffusionStrength,_)&&(a.diffusionStrength=_,n(0,a),n(4,i),n(2,r),n(1,s),n(3,l))}function c(_){t.$$.not_equal(a.diffusionMatrix,_)&&(a.diffusionMatrix=_,n(0,a),n(4,i),n(2,r),n(1,s),n(3,l))}function g(_){t.$$.not_equal(a.diffusionMatrixOriginX,_)&&(a.diffusionMatrixOriginX=_,n(0,a),n(4,i),n(2,r),n(1,s),n(3,l))}function b(_){t.$$.not_equal(a.thresholdMap,_)&&(a.thresholdMap=_,n(0,a),n(4,i),n(2,r),n(1,s),n(3,l))}function m(_){t.$$.not_equal(a.noiseIntensity,_)&&(a.noiseIntensity=_,n(0,a),n(4,i),n(2,r),n(1,s),n(3,l))}function E(_){t.$$.not_equal(a.palette,_)&&(a.palette=_,n(0,a),n(4,i),n(2,r),n(1,s),n(3,l))}return t.$$set=_=>{"image_data"in _&&n(1,s=_.image_data),"config"in _&&n(0,a=_.config)},t.$$.update=()=>{t.$$.dirty&2&&n(4,i=bs(s)),t.$$.dirty&17&&n(0,a.height=Math.round(a.width/i),a),t.$$.dirty&14&&n(0,a.width=r?s.width:l,a)},[a,s,r,l,i,o,u,f,d,c,g,b,m,E]}class Zn extends oe{constructor(e){super(),le(this,e,ws,vs,ae,{image_data:1,config:0})}}function Es(t){let e,n,i;function s(r){t[11](r)}let a={slot:"left",config:t[4],image_data:t[0]};return t[1]!==void 0&&(a.canvas=t[1]),e=new gi({props:a}),x.push(()=>$(e,"canvas",s)),{c(){H(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,l){Y(e,r,l),i=!0},p(r,l){const o={};l&16&&(o.config=r[4]),l&1&&(o.image_data=r[0]),!n&&l&2&&(n=!0,o.canvas=r[1],Q(()=>n=!1)),e.$set(o)},i(r){i||(R(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function ks(t){let e,n,i;function s(r){t[10](r)}let a={slot:"right",config:t[3],image_data:t[0]};return t[2]!==void 0&&(a.canvas=t[2]),e=new gi({props:a}),x.push(()=>$(e,"canvas",s)),{c(){H(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,l){Y(e,r,l),i=!0},p(r,l){const o={};l&8&&(o.config=r[3]),l&1&&(o.image_data=r[0]),!n&&l&4&&(n=!0,o.canvas=r[2],Q(()=>n=!1)),e.$set(o)},i(r){i||(R(e.$$.fragment,r),i=!0)},o(r){N(e.$$.fragment,r),i=!1},d(r){q(e,r)}}}function ys(t){let e,n,i;return e=new De({props:{src:ni,class:"h-4 w-4"}}),{c(){H(e.$$.fragment),n=ye(`
					Save`)},l(s){j(e.$$.fragment,s),n=Me(s,`
					Save`)},m(s,a){Y(e,s,a),O(s,n,a),i=!0},p:te,i(s){i||(R(e.$$.fragment,s),i=!0)},o(s){N(e.$$.fragment,s),i=!1},d(s){s&&p(n),q(e,s)}}}function Ms(t){let e,n,i;return e=new De({props:{src:ni,class:"h-4 w-4"}}),{c(){H(e.$$.fragment),n=ye(`
					Save`)},l(s){j(e.$$.fragment,s),n=Me(s,`
					Save`)},m(s,a){Y(e,s,a),O(s,n,a),i=!0},p:te,i(s){i||(R(e.$$.fragment,s),i=!0)},o(s){N(e.$$.fragment,s),i=!1},d(s){s&&p(n),q(e,s)}}}function Cs(t){let e,n,i,s,a,r,l,o,u,f,d,c,g,b,m,E,_="Options",v,M,A,V,X,U,C,S,L,G,ne,Z,de,ie,F,K="Options",we,re,Ee,se,ce,Be,Te,Ne,rt,st;i=new Ki({props:{$$slots:{right:[ks],left:[Es]},$$scope:{ctx:t}}}),o=new De({props:{src:ri,class:"h-5 w-5 text-white"}}),g=new De({props:{src:t[5]?vt:bt,class:"h-6 w-6 text-gray-500"}}),M=new kn({props:{disabled:!t[0],$$slots:{default:[ys]},$$scope:{ctx:t}}}),M.$on("click",t[14]);function Xt(D){t[15](D)}function Vt(D){t[16](D)}let at={};t[4]!==void 0&&(at.config=t[4]),t[0]!==void 0&&(at.image_data=t[0]),X=new Zn({props:at}),x.push(()=>$(X,"config",Xt)),x.push(()=>$(X,"image_data",Vt)),Z=new De({props:{src:t[6]?vt:bt,class:"h-6 w-6 text-gray-500"}}),re=new kn({props:{disabled:!t[0],$$slots:{default:[Ms]},$$scope:{ctx:t}}}),re.$on("click",t[18]);function qe(D){t[19](D)}function Ft(D){t[20](D)}let ot={};return t[3]!==void 0&&(ot.config=t[3]),t[0]!==void 0&&(ot.image_data=t[0]),ce=new Zn({props:ot}),x.push(()=>$(ce,"config",qe)),x.push(()=>$(ce,"image_data",Ft)),{c(){e=k("section"),n=k("div"),H(i.$$.fragment),s=P(),a=k("section"),r=k("header"),l=k("button"),H(o.$$.fragment),u=P(),f=k("aside"),d=k("header"),c=k("button"),H(g.$$.fragment),b=P(),m=k("div"),E=k("h1"),E.textContent=_,v=P(),H(M.$$.fragment),A=P(),V=k("div"),H(X.$$.fragment),S=P(),L=k("aside"),G=k("header"),ne=k("button"),H(Z.$$.fragment),de=P(),ie=k("div"),F=k("h1"),F.textContent=K,we=P(),H(re.$$.fragment),Ee=P(),se=k("div"),H(ce.$$.fragment),this.h()},l(D){e=y(D,"SECTION",{class:!0});var J=I(e);n=y(J,"DIV",{class:!0});var Xe=I(n);j(i.$$.fragment,Xe),Xe.forEach(p),J.forEach(p),s=B(D),a=y(D,"SECTION",{class:!0});var T=I(a);r=y(T,"HEADER",{class:!0});var W=I(r);l=y(W,"BUTTON",{class:!0,title:!0});var ue=I(l);j(o.$$.fragment,ue),ue.forEach(p),W.forEach(p),u=B(T),f=y(T,"ASIDE",{style:!0,class:!0});var ge=I(f);d=y(ge,"HEADER",{class:!0});var _e=I(d);c=y(_e,"BUTTON",{class:!0});var he=I(c);j(g.$$.fragment,he),he.forEach(p),b=B(_e),m=y(_e,"DIV",{class:!0});var Ve=I(m);E=y(Ve,"H1",{class:!0,"data-svelte-h":!0}),ve(E)!=="svelte-1sdmqh4"&&(E.textContent=_),v=B(Ve),j(M.$$.fragment,Ve),Ve.forEach(p),_e.forEach(p),A=B(ge),V=y(ge,"DIV",{class:!0});var Ze=I(V);j(X.$$.fragment,Ze),Ze.forEach(p),ge.forEach(p),S=B(T),L=y(T,"ASIDE",{style:!0,class:!0});var gt=I(L);G=y(gt,"HEADER",{class:!0});var _t=I(G);ne=y(_t,"BUTTON",{class:!0});var hn=I(ne);j(Z.$$.fragment,hn),hn.forEach(p),de=B(_t),ie=y(_t,"DIV",{class:!0});var pt=I(ie);F=y(pt,"H1",{class:!0,"data-svelte-h":!0}),ve(F)!=="svelte-1sdmqh4"&&(F.textContent=K),we=B(pt),j(re.$$.fragment,pt),pt.forEach(p),_t.forEach(p),Ee=B(gt),se=y(gt,"DIV",{class:!0});var mn=I(se);j(ce.$$.fragment,mn),mn.forEach(p),gt.forEach(p),T.forEach(p),this.h()},h(){h(n,"class","relative h-full w-full"),h(e,"class","fixed inset-0 select-none overflow-hidden"),h(l,"class","pointer-events-auto touch-auto rounded-full bg-black bg-opacity-40 p-2"),h(l,"title","Close Image & Reset"),h(r,"class","header svelte-1kb6xih"),h(c,"class","contents"),h(E,"class","font-bold"),h(m,"class","flex flex-1 items-center justify-between"),h(d,"class","z-10 flex flex-shrink-0 items-center justify-between gap-2 bg-white px-4 py-4 shadow-sm"),h(V,"class","flex max-h-full flex-1 flex-col gap-8 overflow-y-scroll bg-gray-50 p-4 py-8"),Re(V,"hidden",!t[5]),Se(f,"overflow","hidden"),h(f,"class","options-left pointer-events-auto flex max-h-full touch-auto flex-col rounded-md border border-gray-200  svelte-1kb6xih"),h(ne,"class","contents"),h(F,"class","font-bold"),h(ie,"class","flex flex-1 items-center justify-between"),h(G,"class","z-10 flex flex-shrink-0 items-center justify-between gap-2 bg-white px-4 py-4 shadow-sm"),h(se,"class","flex max-h-full flex-1 flex-col gap-8 overflow-y-scroll bg-gray-50 p-4 py-8"),Re(se,"hidden",!t[6]),Se(L,"overflow","hidden"),h(L,"class","options-right pointer-events-auto flex max-h-full touch-auto flex-col rounded-md border border-gray-200  svelte-1kb6xih"),h(a,"class","gui-container pointer-events-none touch-none svelte-1kb6xih")},m(D,J){O(D,e,J),w(e,n),Y(i,n,null),O(D,s,J),O(D,a,J),w(a,r),w(r,l),Y(o,l,null),w(a,u),w(a,f),w(f,d),w(d,c),Y(g,c,null),w(d,b),w(d,m),w(m,E),w(m,v),Y(M,m,null),w(f,A),w(f,V),Y(X,V,null),w(a,S),w(a,L),w(L,G),w(G,ne),Y(Z,ne,null),w(G,de),w(G,ie),w(ie,F),w(ie,we),Y(re,ie,null),w(L,Ee),w(L,se),Y(ce,se,null),Ne=!0,rt||(st=[ee(l,"click",t[12]),ee(c,"click",t[13]),ee(ne,"click",t[17])],rt=!0)},p(D,[J]){const Xe={};J&4194335&&(Xe.$$scope={dirty:J,ctx:D}),i.$set(Xe);const T={};J&32&&(T.src=D[5]?vt:bt),g.$set(T);const W={};J&1&&(W.disabled=!D[0]),J&4194304&&(W.$$scope={dirty:J,ctx:D}),M.$set(W);const ue={};!U&&J&16&&(U=!0,ue.config=D[4],Q(()=>U=!1)),!C&&J&1&&(C=!0,ue.image_data=D[0],Q(()=>C=!1)),X.$set(ue),(!Ne||J&32)&&Re(V,"hidden",!D[5]);const ge={};J&64&&(ge.src=D[6]?vt:bt),Z.$set(ge);const _e={};J&1&&(_e.disabled=!D[0]),J&4194304&&(_e.$$scope={dirty:J,ctx:D}),re.$set(_e);const he={};!Be&&J&8&&(Be=!0,he.config=D[3],Q(()=>Be=!1)),!Te&&J&1&&(Te=!0,he.image_data=D[0],Q(()=>Te=!1)),ce.$set(he),(!Ne||J&64)&&Re(se,"hidden",!D[6])},i(D){Ne||(R(i.$$.fragment,D),R(o.$$.fragment,D),R(g.$$.fragment,D),R(M.$$.fragment,D),R(X.$$.fragment,D),R(Z.$$.fragment,D),R(re.$$.fragment,D),R(ce.$$.fragment,D),Ne=!0)},o(D){N(i.$$.fragment,D),N(o.$$.fragment,D),N(g.$$.fragment,D),N(M.$$.fragment,D),N(X.$$.fragment,D),N(Z.$$.fragment,D),N(re.$$.fragment,D),N(ce.$$.fragment,D),Ne=!1},d(D){D&&(p(e),p(s),p(a)),q(i),q(o),q(g),q(M),q(X),q(Z),q(re),q(ce),rt=!1,ze(st)}}}let xn=300;function Is(t){return t?t.width/t.height:1}function Ss(t,e,n){let i,s;const a=$n();let r=null,l=null,{image_data:o}=e;async function u(S){S&&await Ti(S,"dithered","png")}let f={mode:"ordered",width:xn,height:i,thresholdMap:null,noiseIntensity:.08,palette:null,diffusionStrength:1,diffusionMatrix:[[1]],diffusionMatrixOriginX:0},d={mode:"none",width:o.width,height:o.height,thresholdMap:null,noiseIntensity:.08,palette:null,diffusionStrength:1,diffusionMatrix:[[1]],diffusionMatrixOriginX:0},c=!1,g=!0;function b(S){l=S,n(2,l)}function m(S){r=S,n(1,r)}const E=()=>a("cancel"),_=()=>n(5,c=!c),v=()=>{r&&u(r)};function M(S){d=S,n(4,d)}function A(S){o=S,n(0,o)}const V=()=>n(6,g=!g),X=()=>{l&&u(l)};function U(S){f=S,n(3,f)}function C(S){o=S,n(0,o)}return t.$$set=S=>{"image_data"in S&&n(0,o=S.image_data)},t.$$.update=()=>{t.$$.dirty&1&&n(9,s=Is(o)),t.$$.dirty&512&&(i=Math.round(xn/s))},[o,r,l,f,d,c,g,a,u,s,b,m,E,_,v,M,A,V,X,U,C]}class Ts extends oe{constructor(e){super(),le(this,e,Ss,Cs,ae,{image_data:0})}}function Gn(t){const n=new OffscreenCanvas(t.width,t.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}function Ls(t){let e,n;return e=new Fi({}),e.$on("image",t[3]),{c(){H(e.$$.fragment)},l(i){j(e.$$.fragment,i)},m(i,s){Y(e,i,s),n=!0},p:te,i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function As(t){let e,n;return e=new Ts({props:{image_data:t[0]}}),e.$on("cancel",t[2]),{c(){H(e.$$.fragment)},l(i){j(e.$$.fragment,i)},m(i,s){Y(e,i,s),n=!0},p(i,s){const a={};s&1&&(a.image_data=i[0]),e.$set(a)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){N(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function Rs(t){let e,n,i,s,a,r,l,o,u,f,d,c,g,b,m,E,_,v,M,A;const V=[As,Ls],X=[];function U(C,S){return C[0]?0:1}return E=U(t),_=X[E]=V[E](t),{c(){e=P(),n=k("meta"),i=k("meta"),s=k("meta"),a=k("meta"),r=k("meta"),l=k("meta"),o=k("meta"),u=k("meta"),f=k("meta"),d=k("meta"),c=k("meta"),g=k("link"),b=P(),m=k("main"),_.c(),this.h()},l(C){e=B(C);const S=Si("svelte-15ioge4",document.head);n=y(S,"META",{name:!0,content:!0}),i=y(S,"META",{name:!0,content:!0}),s=y(S,"META",{name:!0,content:!0}),a=y(S,"META",{name:!0,content:!0}),r=y(S,"META",{name:!0,content:!0}),l=y(S,"META",{name:!0,content:!0}),o=y(S,"META",{name:!0,content:!0}),u=y(S,"META",{name:!0,content:!0}),f=y(S,"META",{name:!0,content:!0}),d=y(S,"META",{name:!0,content:!0}),c=y(S,"META",{name:!0,content:!0}),g=y(S,"LINK",{rel:!0,href:!0}),S.forEach(p),b=B(C),m=y(C,"MAIN",{class:!0});var L=I(m);_.l(L),L.forEach(p),this.h()},h(){document.title="Dither Studio",h(n,"name","description"),h(n,"content","The most performant online dithering tool. Supports all common Ordered Dithering and Error Diffutision algorithms, with custom color-palettes."),h(i,"name","og:image"),h(i,"content",pn),h(s,"name","author"),h(s,"content","Loris Sigrist"),h(a,"name","twitter:card"),h(a,"content","summary_large_image"),h(r,"name","twitter:site"),h(r,"content","@loris_sigrist"),h(l,"name","twitter:creator"),h(l,"content","@loris_sigrist"),h(o,"name","twitter:title"),h(o,"content","Dither Studio"),h(u,"name","twitter:description"),h(u,"content","The most performant online dithering tool. Supports all common Ordered Dithering and Error Diffutision algorithms, with custom color-palettes."),h(f,"name","twitter:image"),h(f,"content",pn),h(d,"name","twitter:image:alt"),h(d,"content","Dither Studio"),h(c,"name","twitter:domain"),h(c,"content","https://dithering.sigrist.dev"),h(g,"rel","icon"),h(g,"href",Li),h(m,"class","max-w-screen relative h-screen max-h-screen w-screen bg-gray-300")},m(C,S){O(C,e,S),w(document.head,n),w(document.head,i),w(document.head,s),w(document.head,a),w(document.head,r),w(document.head,l),w(document.head,o),w(document.head,u),w(document.head,f),w(document.head,d),w(document.head,c),w(document.head,g),O(C,b,S),O(C,m,S),X[E].m(m,null),v=!0,M||(A=[ee(document.body,"drop",Gt(t[1])),ee(document.body,"dragover",Gt(Ds))],M=!0)},p(C,[S]){let L=E;E=U(C),E===L?X[E].p(C,S):(tt(),N(X[L],1,1,()=>{X[L]=null}),nt(),_=X[E],_?_.p(C,S):(_=X[E]=V[E](C),_.c()),R(_,1),_.m(m,null))},i(C){v||(R(_),v=!0)},o(C){N(_),v=!1},d(C){C&&(p(e),p(b),p(m)),p(n),p(i),p(s),p(a),p(r),p(l),p(o),p(u),p(f),p(d),p(c),p(g),X[E].d(),M=!1,ze(A)}}}const Ds=()=>{};function Ps(t,e,n){let i=null;async function s(l){var u;const o=(u=l.dataTransfer)==null?void 0:u.files[0];if(o){if(!o.type.startsWith("image/")){alert("Please drop an image file");return}try{const f=await ti(o);n(0,i=Gn(f))}catch(f){alert("Failed to load image"),console.error(f)}}}return[i,s,()=>n(0,i=null),l=>n(0,i=Gn(l.detail))]}class Us extends oe{constructor(e){super(),le(this,e,Ps,Rs,ae,{})}}export{Us as component};
